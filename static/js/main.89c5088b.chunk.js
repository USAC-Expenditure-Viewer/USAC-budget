(this.webpackJsonpbudget_wc=this.webpackJsonpbudget_wc||[]).push([[0],{326:function(t,e,a){},402:function(t,e,a){t.exports=a(509)},407:function(t,e,a){},421:function(t,e){},509:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(15),o=a.n(i),c=(a(407),a(326),a(534)),s=a(327),l=a(262),u=a(89),d=a(376),h=a.n(d);function f(){return r.a.createElement(c.a,{position:"sticky"},r.a.createElement(s.a,null,r.a.createElement(l.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(h.a,null)),r.a.createElement(u.a,{variant:"h6"},"USAC Budget/Spendings 2018-2019")))}var p=a(78),b=a(79),m=a(95),g=a(94),v=a(139),y=(a(369),a(536)),O=a(394);function k(t){if(Number.isNaN(t))return"";var e=t.toFixed(2).split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function j(t){if(Number.isNaN(t))return"";var e="";return t>=1e6?(e="M",t/=1e6):t>=1e3&&(e="K",t/=1e3),t.toPrecision(3)+e}var w=function(t){Object(m.a)(a,t);var e=Object(g.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).callbacks={getWordTooltip:function(t){return"".concat(t.text," has $").concat(j(t.value)," in the category.")},onWordClick:n.getCallback("onWordClick").bind(Object(v.a)(n)),onWordMouseOut:n.getCallback("onWordMouseOut").bind(Object(v.a)(n)),onWordMouseOver:n.getCallback("onWordMouseOver").bind(Object(v.a)(n))},n.options={fontFamily:"impact",fontSizes:[5,60],fontStyle:"normal",fontWeight:"normal",scale:"log",deterministic:!0,rotations:4,rotationAngles:[-45,90],transitionDuration:200},n.state={words:[{text:"Loading...",value:100}]},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.props.dataloader.addChangeCallback(this.setWords.bind(this))}},{key:"render",value:function(){return r.a.createElement("div",{style:this.props.style},r.a.createElement(O.a,{callbacks:this.callbacks,words:this.props.dataloader.getWordList(),options:this.options}))}},{key:"getCallback",value:function(t){var e=this;return function(a,n){var r="onWordMouseOut"!==t;Object(y.a)(n.target).on("click",(function(){r&&e.props.dataloader.addkeywordFilter(a.text)})).transition().attr("background","white").attr("text-decoration",r?"underline":"none")}}},{key:"setWords",value:function(){this.forceUpdate()}}]),a}(n.Component),C=a(386),E=a.n(C),x=a(545),F=a(546),W=a(547),D=a(548),M=a(549),N=a(550),P=function(t){Object(m.a)(a,t);var e=Object(g.a)(a);function a(){var t;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).columns=[{title:"Date",field:"date",type:"date"},{title:"Amount",field:"amount",type:"currency"},{title:"Description",field:"description"},{title:"Department",field:"department"},{title:"Fund",field:"fund"},{title:"Division",field:"division"},{title:"Event",field:"event"},{title:"GL",field:"gl"}],t.options={showTitle:!0,sorting:!0,exportButton:!0,padding:"dense",paging:!0,search:!1,draggable:!1,headerStyle:{position:"sticky",top:0},exportAllData:!0},t.icons={Export:x.a,SortArrow:F.a,FirstPage:W.a,LastPage:D.a,NextPage:M.a,PreviousPage:N.a},t}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.props.dataloader.addChangeCallback((function(){return t.forceUpdate()}))}},{key:"render",value:function(){return r.a.createElement(E.a,{options:this.options,columns:this.columns,icons:this.icons,data:this.props.dataloader.getRecords(),title:"Transactions: total $"+k(this.props.dataloader.getTotal())})}}]),a}(n.Component),S=a(552),A=a(544),T=function(t){Object(m.a)(a,t);var e=Object(g.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.props.dataloader.addChangeCallback((function(){return t.forceUpdate()}))}},{key:"render",value:function(){var t=this,e=this.props.dataloader.getFilters();return r.a.createElement(S.a,{separator:">",style:this.props.style},r.a.createElement(A.a,{key:-1,color:"textPrimary",onClick:function(){return t.props.dataloader.sliceFilter(0)}},"Transactions($",j(this.props.dataloader.getDatasetTotal()),")"),e.slice(0,-1).map((function(e,a){return r.a.createElement(A.a,{key:a,color:"textSecondary",onClick:function(){return t.props.dataloader.sliceFilter(a+1)}},e.category,": ",e.name,"($",j(e.amount),")")})),e.length>0?r.a.createElement(u.a,{color:"textPrimary",key:e.length},e[e.length-1].category,": ",e[e.length-1].name,"($",j(e[e.length-1].amount),")"):null)}}]),a}(n.Component),_=a(155),B=a(111),L=a(81),$=a(17),Q=a(230),U=a(393),q=function(){function t(e){var a=this;Object(p.a)(this,t),this.data=[],Object.defineProperty(this,K,{writable:!0,value:[]}),Object.defineProperty(this,R,{writable:!0,value:[]}),this.query=void 0,this.dataset=void 0,Object.defineProperty(this,J,{writable:!0,value:0}),this.query=e,this.dataset=t.parseDataset(e),U.parse(window.location.pathname+"/expense_summary_"+this.dataset+".csv",{download:!0,header:!0,complete:function(t){a.data=t.data.map((function(t){return t.date=new Date(1e3*Number.parseFloat(t.date)),t.amount=Number.parseFloat(t.amount),t.words=t.__parsed_extra||[],t})),a.onLoad()}})}return Object(b.a)(t,[{key:"onLoad",value:function(){Object($.a)(this,J)[J]=this.data.reduce((function(t,e){return t+e.amount}),0),this.parseQuery(this.query),this.listChangeCallback()}},{key:"parseQuery",value:function(t){var e=this;"?"===t[0]&&(t=t.slice(1));var a=Object($.a)(this,R)[R];Object($.a)(this,R)[R]=[];try{t.split("&").forEach((function(t){if(t.includes("=")){var a=t.indexOf("="),n=t.substr(0,a),r=t.substr(a+1);switch(n){case"keyword":e.addkeywordFilter(r);break;case"fund":case"division":case"department":case"gl":case"event":e.addCategoryFilter(n,btoa(r));break;case"amount":if(!r.includes(".."))return;var i=r.split("..").map((function(t){return function(t){var e=1;return t.includes("K")&&(e=1e3,t=t.replace("K","")),t.includes("M")&&(e=1e6,t=t.replace("M","")),t.includes("B")&&(t=t.replace("B",""),e=1e9),Number.parseFloat(t)*e}(t)}));e.addAmountFilter(i[0],i[1])}}}))}catch(n){console.log(n)}Object($.a)(this,R)[R]=a}},{key:"setQueryString",value:function(){var t="d="+this.dataset+Object($.a)(this,K)[K].reduce((function(t,e){switch(e.category){case"keyword":return t+"&keyword="+e.name;case"amount":return t+"&amount="+e.name.replace("~","..");default:return t+"&"+e.category+"="+atob(e.name)}}),""),e=window.location.href;e.includes("?")&&(e=e.substr(0,e.indexOf("?"))),window.history.pushState({path:e+"?"+t},"",e+"?"+t)}},{key:"listChangeCallback",value:function(){Object($.a)(this,R)[R].forEach((function(t){return t()})),this.setQueryString()}},{key:"addChangeCallback",value:function(t){Object($.a)(this,R)[R].push(t)}},{key:"getRecords",value:function(){return 0===this.data.length?[]:0===Object($.a)(this,K)[K].length?this.data:Object($.a)(this,K)[K][Object($.a)(this,K)[K].length-1].index}},{key:"getWordList",value:function(){if(0===this.data.length)return[];var t=new Map;this.getRecords().forEach((function(e){e.words.forEach((function(a){t.set(a,(t.get(a)||0)+e.amount)}))}));var e,a=[],n=Object(L.a)(t.entries());try{for(n.s();!(e=n.n()).done;){var r=Object(B.a)(e.value,2),i=r[0],o=r[1];a.push({text:i,value:o})}}catch(c){n.e(c)}finally{n.f()}return a.sort((function(t,e){return t.value-e.value})),a}},{key:"getTotal",value:function(){return 0===Object($.a)(this,K)[K].length?Object($.a)(this,J)[J]:Object($.a)(this,K)[K][Object($.a)(this,K)[K].length-1].amount}},{key:"getDatasetTotal",value:function(){return Object($.a)(this,J)[J]}},{key:"getFilters",value:function(){return Object($.a)(this,K)[K]}},{key:"sliceFilter",value:function(t){Object($.a)(this,K)[K]=Object($.a)(this,K)[K].slice(0,t),this.listChangeCallback()}},{key:"addkeywordFilter",value:function(t){if(0!==this.data.length&&!Object($.a)(this,K)[K].reduce((function(e,a){return e||"keyword"===a.category&&a.name===t}),!1)){var e;if(0!==Object($.a)(this,K)[K].length)e=Object($.a)(this,K)[K][Object($.a)(this,K)[K].length-1].index.filter((function(e){return e.words.includes(t)}));else e=this.data.filter((function(e){return e.words.includes(t)}));Object($.a)(this,K)[K].push({category:"keyword",name:t,index:e,amount:e.reduce((function(t,e){return t+e.amount}),0)}),this.listChangeCallback()}}},{key:"addCategoryFilter",value:function(t,e){if(0!==this.data.length){var a;if(0!==Object($.a)(this,K)[K].length)a=Object($.a)(this,K)[K][Object($.a)(this,K)[K].length-1].index.filter((function(a){return a[t]===e}));else a=this.data.filter((function(a){return a[t]===e}));Object($.a)(this,K)[K].push({category:t,name:e,index:a,amount:a.reduce((function(t,e){return t+e.amount}),0)}),this.listChangeCallback()}}},{key:"addAmountFilter",value:function(t,e){if(0!==this.data.length){var a;if(0!==Object($.a)(this,K)[K].length)"amount"===Object($.a)(this,K)[K][Object($.a)(this,K)[K].length-1].category&&(Object($.a)(this,K)[K]=Object($.a)(this,K)[K].slice(0,-1)),a=Object($.a)(this,K)[K][Object($.a)(this,K)[K].length-1].index.filter((function(a){return t<=a.amount&&a.amount<=e}));else a=this.data.filter((function(a){return t<=a.amount&&a.amount<=e}));Object($.a)(this,K)[K].push({category:"amount",name:j(t)+"~"+j(e),index:a,amount:a.reduce((function(t,e){return t+e.amount}),0)}),this.listChangeCallback()}}}],[{key:"parseDataset",value:function(t){"?"===t[0]&&(t=t.slice(1));var e=t.split("&").filter((function(t){return t.startsWith("d=")}));return 0===e.length?"2018":e[0].substr(2)}}]),t}(),K=Object(Q.a)("filters"),R=Object(Q.a)("dataChangeCallbacks"),J=Object(Q.a)("total_amount"),z=function(t){Object(m.a)(a,t);var e=Object(g.a)(a);function a(){return Object(p.a)(this,a),e.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var t=new q(this.props.dataset);return r.a.createElement(_.a,{variant:"outlined",className:"App",style:{margin:"0 10%"}},r.a.createElement(T,{style:{margin:10},dataloader:t}),r.a.createElement(w,{style:{height:"80vh"},dataloader:t}),r.a.createElement(P,{dataloader:t}))}}]),a}(r.a.Component);var G=function(){return r.a.createElement("div",null,r.a.createElement(f,null),r.a.createElement(z,{dataset:window.location.search}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[402,1,2]]]);
//# sourceMappingURL=main.89c5088b.chunk.js.map