(this.webpackJsonpbudget_wc=this.webpackJsonpbudget_wc||[]).push([[0],{186:function(e,t,a){},297:function(e,t,a){e.exports=a(493)},302:function(e,t,a){},312:function(e,t){},493:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(15),o=a.n(i),l=(a(302),a(22)),s=a(20),u=a(25),c=a(24),d=(a(186),a(65)),h=a(87),m=(a(235),a(541)),g=a(268);function f(e){if(Number.isNaN(e))return"";var t="";return Math.abs(e)>=1e9?(t="B",e/=1e9):Math.abs(e)>=1e6?(t="M",e/=1e6):Math.abs(e)>=1e3&&(t="K",e/=1e3),e.toPrecision(3)+t}function p(e){var t=1;return e.includes("K")&&(t=1e3,e=e.replace("K","")),e.includes("M")&&(t=1e6,e=e.replace("M","")),e.includes("B")&&(e=e.replace("B",""),t=1e9),Number.parseFloat(e)*t}var v=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).callbacks={getWordTooltip:function(e){return'Descriptions containing "'.concat(e.text,'" total $').concat(f(e.value))},onWordClick:n.getCallback("onWordClick").bind(Object(d.a)(n)),onWordMouseOut:n.getCallback("onWordMouseOut").bind(Object(d.a)(n)),onWordMouseOver:n.getCallback("onWordMouseOver").bind(Object(d.a)(n))},n.options={fontFamily:"impact",fontSizes:[12,60],fontStyle:"normal",fontWeight:"normal",scale:"log",deterministic:!0,rotations:4,rotationAngles:[-45,90],transitionDuration:200},n.state={words:[{text:"Loading...",value:100}]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.dataloader.addChangeCallback(this.setWords.bind(this))}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:"60vh"},hidden:this.props.hidden},this.props.hidden?null:r.a.createElement(g.a,{callbacks:this.callbacks,words:this.props.dataloader.getWordList().slice(0,80),options:this.options}))}},{key:"getCallback",value:function(e){var t=this;return function(a,n){var r="onWordMouseOut"!==e;Object(m.a)(n.target).on("click",(function(){r&&t.props.dataloader.addKeywordFilter(a.text)})).transition().attr("background","white").attr("text-decoration",r?"underline":"none")}}},{key:"setWords",value:function(){this.forceUpdate()}}]),a}(n.Component),y=a(43),b=a(44),k=a(8),E=a(551),C=a(251),w=a(253),S=a(86),x=function(){function e(){Object(l.a)(this,e),this.queryString=void 0,this.generators=new Map,this.queryString=window.location.search.replace("?","")}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null===this.instance&&(this.instance=new e),this.instance}}]),Object(s.a)(e,[{key:"getQuery",value:function(){return this.queryString}},{key:"addGenerator",value:function(e,t){this.generators.set(t,e)}},{key:"update",value:function(){var e=Object(S.a)(this.generators.values()).map((function(e){return e()})).join("&"),t=window.location.href;t.includes("?")&&(t=t.substr(0,t.indexOf("?"))),window.history.pushState({path:t+"?"+e},"",t+"?"+e)}}]),e}();x.instance=null;var F=a(46),D=a(254);function O(e){return["fund","division","department","gl","event"].includes(e)}var j=function(){function e(t){Object(l.a)(this,e),this.data=[],this.filters=[],this.dataChangeCallbacks=[],this.total_amount=0,this.dataset=null,this.otherDepth=0,this.otherCategory="fund",this.peekTable=!1,this.dataset=t,this.setDataset(t)}return Object(s.a)(e,[{key:"setDataset",value:function(e){this.sliceFilter(0),this.loadDataset(e)}},{key:"getDataset",value:function(){return this.dataset}},{key:"loadDataset",value:function(e){var t=this;null!==e&&D.parse(window.location.pathname+"/expense_summary_"+e+".csv",{download:!0,header:!0,complete:function(e){t.data=e.data.map((function(e){return e.date=new Date(1e3*Number.parseFloat(e.date)),e.amount=Number.parseFloat(e.amount),e.words=e.__parsed_extra||[],e})).filter((function(e){return!Number.isNaN(e.amount)})),t.onLoad()}})}},{key:"onLoad",value:function(){this.total_amount=this.data.reduce((function(e,t){return e+t.amount}),0),this.parseQuery(x.getInstance().getQuery()),x.getInstance().addGenerator(this.generateQueryString.bind(this),2),this.listChangeCallback()}},{key:"parseQuery",value:function(e){var t=this;"?"===e[0]&&(e=e.slice(1));var a=this.dataChangeCallbacks;this.dataChangeCallbacks=[];try{e.split("&").forEach((function(e){if(e.includes("=")){var a=e.indexOf("="),n=e.substr(0,a),r=e.substr(a+1);switch(n){case"keyword":t.addKeywordFilter(r);break;case"fund":case"division":case"department":case"gl":case"event":t.addCategoryFilter(n,atob(r));break;case"amount":if(!r.includes(".."))return;var i=r.split("..").map((function(e){return p(e)}));t.addAmountFilter(i[0],i[1]);break;case"date":if(!r.includes(".."))return;var o=r.split("..");t.addMonthFilter(o[0],o[1])}}}))}catch(n){console.log(n)}this.dataChangeCallbacks=a}},{key:"generateQueryString",value:function(){return this.filters.map((function(e){switch(e.category){case"keyword":return"keyword="+e.name;case"amount":return"amount="+e.name.replace("~","..");case"date":return"date="+e.name.replace("~","..");default:return e.category+"="+btoa(e.name)}})).join("&")}},{key:"listChangeCallback",value:function(){this.dataChangeCallbacks.forEach((function(e){return e()})),x.getInstance().update()}},{key:"addChangeCallback",value:function(e){this.dataChangeCallbacks.push(e)}},{key:"getOtherDepth",value:function(){return this.otherDepth}},{key:"setOtherDepth",value:function(e){this.otherDepth=e,this.listChangeCallback()}},{key:"getOtherCategory",value:function(){return this.otherCategory}},{key:"setOtherCategory",value:function(e){this.otherCategory=e,this.listChangeCallback()}},{key:"setPeekTable",value:function(e){this.peekTable=e,this.listChangeCallback()}},{key:"getPeekTable",value:function(){return this.peekTable}},{key:"getRecords",value:function(){return 0===this.data.length?[]:0===this.filters.length?this.data:this.filters[this.filters.length-1].index}},{key:"getWordList",value:function(){if(0===this.data.length)return[];var e=new Map;this.getRecords().forEach((function(t){t.words.forEach((function(a){e.set(a,(e.get(a)||0)+t.amount)}))}));var t,a=this.filters.filter((function(e){return"keyword"===e.category})).map((function(e){return e.name})),n=[],r=Object(F.a)(e.entries());try{for(r.s();!(t=r.n()).done;){var i=Object(y.a)(t.value,2),o=i[0],l=i[1];a.includes(o)||n.push({text:o,value:l})}}catch(s){r.e(s)}finally{r.f()}return n.sort((function(e,t){return t.value-e.value})),n}},{key:"getCategories",value:function(e){var t,a;if(0===this.data.length)return[];a=(null===(t=this.getLastFilter())||void 0===t?void 0:t.category)===e?this.filters.length>=2?this.filters[this.filters.length-2].index:this.data:this.getRecords();var n=new Map;a.forEach((function(t){var a=t[e];n.set(a,(n.get(a)||0)+t.amount)}));var r,i=[],o=Object(F.a)(n.entries());try{for(o.s();!(r=o.n()).done;){var l=Object(y.a)(r.value,2),s=l[0],u=l[1];i.push({text:s,value:u})}}catch(c){o.e(c)}finally{o.f()}return i.sort((function(e,t){return e.value-t.value})),i}},{key:"getAmountBins",value:function(e){if(0===this.data.length)return{data:[],domain:[0,1]};var t,a=null;0!==this.filters.length&&"amount"===this.filters[this.filters.length-1].category?(t=this.filters.length>=2?this.filters[this.filters.length-2].index:this.data,a=this.filters[this.filters.length-1].name.split("~").map((function(e){return p(e)}))):t=this.getRecords();var n=t.reduce((function(e,t){return[Math.min(e[0],t.amount),Math.max(e[1],t.amount)]}),[Number.MAX_VALUE,Number.MIN_VALUE]),r=Object(y.a)(n,2),i=r[0],o=r[1];null===a&&(a=[i,o]);for(var l=[],s=((o+=.001)-i)/e,u=0;u<e;u++)l.push({low:i+u*s,high:i+(u+1)*s,value:0,name:f(i+(u+.5)*s)});return t.forEach((function(e){l.forEach((function(t){t.low<=e.amount&&e.amount<t.high&&(t.value+=e.amount)}))})),{data:l,domain:a}}},{key:"getMonthBins",value:function(){if(0===this.data.length)return{data:[{text:"0000-01",value:0}],domain:["0000-01","0000-01"]};var e,t=null;0!==this.filters.length&&"date"===this.filters[this.filters.length-1].category?(e=this.filters.length>=2?this.filters[this.filters.length-2].index:this.data,t=this.filters[this.filters.length-1].name.split("~")):e=this.getRecords();var a=e.reduce((function(e,t){var a=(t.date.getFullYear()+"").padStart(4,"0")+"-"+(t.date.getMonth()+1+"").padStart(2,"0");return[e[0].localeCompare(a)<0?e[0]:a,e[1].localeCompare(a)>0?e[1]:a]}),["9999-99","0000-00"]),n=Object(y.a)(a,2),r=n[0],i=n[1];null===t&&(t=[r,i]);var o=new Map;e.forEach((function(e){var t=(e.date.getFullYear()+"").padStart(4,"0")+"-"+(e.date.getMonth()+1+"").padStart(2,"0");o.set(t,(o.get(t)||0)+e.amount)}));for(var l=Object(S.a)(o.entries()).map((function(e){return{text:e[0],value:e[1]}})).sort((function(e,t){return e.text.localeCompare(t.text)}));0!==l.length&&l.length<12;){var s=l[l.length-1].text.split("-").map((function(e){return Number.parseInt(e)}));12!==s[1]?s[1]++:s=[s[0]+1,1];var u=(s[0]+"").padStart(4,"0")+"-"+(s[1]+"").padStart(2,"0");l.push({text:u,value:0})}return{data:l,domain:t}}},{key:"getTotal",value:function(){return 0===this.filters.length?this.total_amount:this.filters[this.filters.length-1].amount}},{key:"getDatasetTotal",value:function(){return this.total_amount}},{key:"getFilters",value:function(){return this.filters}},{key:"getLastFilter",value:function(){return 0===this.filters.length?null:this.filters[this.filters.length-1]}},{key:"sliceFilter",value:function(e){this.otherDepth=0,this.filters=this.filters.slice(0,e),this.listChangeCallback()}},{key:"addKeywordFilter",value:function(e){if(0!==this.data.length&&!this.filters.reduce((function(t,a){return t||"keyword"===a.category&&a.name===e}),!1)){var t;if(0!==this.filters.length)t=this.filters[this.filters.length-1].index.filter((function(t){return t.words.includes(e)}));else t=this.data.filter((function(t){return t.words.includes(e)}));this.filters.push({category:"keyword",name:e,index:t,amount:t.reduce((function(e,t){return e+t.amount}),0)}),this.listChangeCallback()}}},{key:"addCategoryFilter",value:function(e,t){var a;if(0!==this.data.length&&!this.filters.reduce((function(a,n){return a||n.category===e&&n.name===t}),!1)){var n;if((null===(a=this.getLastFilter())||void 0===a?void 0:a.category)===e&&(this.filters=this.filters.slice(0,-1)),0!==this.filters.length)n=this.filters[this.filters.length-1].index.filter((function(a){return a[e]===t}));else n=this.data.filter((function(a){return a[e]===t}));this.filters.push({category:e,name:t,index:n,amount:n.reduce((function(e,t){return e+t.amount}),0)}),this.listChangeCallback()}}},{key:"removeCategoryFilter",value:function(e,t){var a;if(0!==this.data.length&&!this.filters.reduce((function(a,n){return a||n.category===e&&n.name===t}),!1)){var n;if((null===(a=this.getLastFilter())||void 0===a?void 0:a.category)===e&&(this.filters=this.filters.slice(0,-1)),0!==this.filters.length)n=this.filters[this.filters.length-1].index.filter((function(a){return a[e]===t}));else n=this.data.filter((function(a){return a[e]===t}));this.filters.push({category:e,name:t,index:n,amount:n.reduce((function(e,t){return e+t.amount}),0)}),this.listChangeCallback()}}},{key:"addAmountFilter",value:function(e,t){if(0!==this.data.length){this.filters.length>0&&"amount"===this.filters[this.filters.length-1].category&&(this.filters=this.filters.slice(0,-1));var a=(this.filters.length>0?this.filters[this.filters.length-1].index:this.data).filter((function(a){return e<=a.amount&&a.amount<=t}));this.filters.push({category:"amount",name:f(e)+"~"+f(t),index:a,amount:a.reduce((function(e,t){return e+t.amount}),0)}),this.listChangeCallback()}}},{key:"addMonthFilter",value:function(e,t){if(0!==this.data.length){this.filters.length>0&&"date"===this.filters[this.filters.length-1].category&&(this.filters=this.filters.slice(0,-1));var a=(this.filters.length>0?this.filters[this.filters.length-1].index:this.data).filter((function(a){var n=(a.date.getFullYear()+"").padStart(4,"0")+"-"+(a.date.getMonth()+1+"").padStart(2,"0");return e.localeCompare(n)<=0&&n.localeCompare(t)<=0}));this.filters.push({category:"date",name:e+"~"+t,index:a,amount:a.reduce((function(e,t){return e+t.amount}),0)}),this.listChangeCallback()}}}]),e}(),W=function(){function e(){var t=this;Object(l.a)(this,e),this.datasets=[],this.currentDataset=null,this.callbacks=[],this.dataLoader=void 0,this.ready=!1,this.parseDataset(x.getInstance().getQuery()),this.dataLoader=new j(this.currentDataset),x.getInstance().addGenerator(this.getQueryString.bind(this),0),fetch(window.location.pathname+"/datasets.json").then((function(e){return e.json()})).then((function(e){t.datasets=e,t.ready=!0,null===t.currentDataset&&(t.currentDataset=t.datasets[0]),t.dataLoader.setDataset(t.currentDataset),t.callbacks.forEach((function(e){return e()}))}))}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return null===this.instance&&(this.instance=new e),this.instance}}]),Object(s.a)(e,[{key:"addChangeCallback",value:function(e){this.callbacks.push(e)}},{key:"getCurrentDataset",value:function(){if(null!=this.currentDataset)return this.currentDataset}},{key:"getCurrentDatasetName",value:function(){if(null!=this.currentDataset)return e.getDatasetTitle(this.currentDataset)}},{key:"getDatasets",value:function(){if(this.ready)return this.datasets}},{key:"getDatasetNames",value:function(){if(this.ready)return this.datasets.map(e.getDatasetTitle)}},{key:"getDataLoader",value:function(){return this.dataLoader}},{key:"setCurrentDataset",value:function(e){this.currentDataset=e,x.getInstance().update(),this.dataLoader.setDataset(e),this.callbacks.forEach((function(e){return e()}))}},{key:"parseDataset",value:function(e){"?"===e[0]&&(e=e.slice(1));var t=e.split("&").filter((function(e){return e.startsWith("d=")}));0!==t.length&&(this.currentDataset=t[0].substr(2))}},{key:"getQueryString",value:function(){return null===this.currentDataset?"":"d="+this.currentDataset}}],[{key:"getDatasetTitle",value:function(e){return e.match(/^\d*$/)?e+"-"+(Number.parseInt(e)+1).toString():e}}]),e}();W.instance=null;var M=["January","February","March","April","May","June","July","August","September","October","November","December"],N=function(e){var t=e.value;return r.a.createElement("span",{style:{color:"blue"}},t.toLocaleString("en-US",{style:"currency",currency:"USD"}))},A=function(e){var t=e.value;return r.a.createElement("span",null,t.toDateString())},L=function(e){var t=e.column,a=e.row;if("date"===t.name){a.key.toString();var n=a.key.toString().split("-"),i=Object(y.a)(n,2),o=i[0],l=i[1];return r.a.createElement("span",null,r.a.createElement("strong",null,"Date:")," ",M[Number.parseInt(l)-1]," ",o)}return r.a.createElement("span",null,r.a.createElement("strong",null,t.title,":")," ",a.value)},B=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).TableHeaderCell=function(e){return r.a.createElement(b.g.Cell,Object.assign({},e,{onClick:function(){return n.setHighlight(e.column)},style:e.column.name===n.state.selectedColumn?{cursor:"pointer",textDecoration:"underline",fontWeight:"bold",backgroundColor:n.getSelectedBackgroundColor(e.column.name),color:"White"}:{cursor:"pointer",fontWeight:"bold",backgroundColor:n.getBackgroundColor(e.column.name),color:"Black"}}))},n.summaryItems=[{columnName:"date",type:"count"},{columnName:"amount",type:"sum"}],n.columns=[{title:"Row",name:"id"},{title:"Posted Date",name:"date"},{title:"Description",name:"description"},{title:"Amount",name:"amount"},{title:"Fund",name:"fund"},{title:"Division",name:"division"},{title:"Department",name:"department"},{title:"Event",name:"event"},{title:"GL",name:"gl"}],n.tableColumnExtension=[{columnName:"id",wordWrapEnabled:!0},{columnName:"date",wordWrapEnabled:!0},{columnName:"department",wordWrapEnabled:!0},{columnName:"fund",wordWrapEnabled:!0},{columnName:"division",wordWrapEnabled:!0},{columnName:"event",wordWrapEnabled:!0},{columnName:"gl",wordWrapEnabled:!0},{columnName:"description",wordWrapEnabled:!0},{columnName:"amount",wordWrapEnabled:!0}],n.groupSummaryItems=[{columnName:"amount",type:"sum",showInGroupFooter:!1,alignByColumn:!0},{columnName:"amount",type:"sum",showInGroupFooter:!0},{columnName:"date",type:"count",showInGroupFooter:!0}],n.groupExtension=[{columnName:"id",showWhenGrouped:!0},{columnName:"date",showWhenGrouped:!0},{columnName:"department",showWhenGrouped:!0},{columnName:"fund",showWhenGrouped:!0},{columnName:"division",showWhenGrouped:!0},{columnName:"event",showWhenGrouped:!0},{columnName:"gl",showWhenGrouped:!0},{columnName:"description",showWhenGrouped:!0},{columnName:"amount",showWhenGrouped:!0}],n.groupingColumnExtensions=[{columnName:"date",criteria:function(e){return e instanceof Date?{key:function(e){return e.getFullYear().toString().padStart(4,"0")+"-"+(e.getMonth()+1).toString().padStart(2,"0")}(e)}:{key:""}}}],n.exporter=void 0,n.groupWeight=void 0,n.searchValue="",n.integratedSortingColumnExtensions=[],n.exporter=r.a.createRef(),n.state={sortingState:[{columnName:"id",direction:"asc"}],groupBy:void 0,dataHeight:110,selectedColumn:"description",searchValue:""},n.groupWeight=new Map,void 0!==n.state.groupBy&&"date"!==n.state.groupBy&&n.buildGroupWeightTable(),n}return Object(s.a)(a,[{key:"getBackgroundColor",value:function(e){switch(e){case"fund":return"#FFDBDB";case"division":return"#FFEFD4";case"department":return"#E6FFCC";case"event":return"#E6F7FF";case"gl":return"#FFE6FF";default:return"#E6E6E6"}}},{key:"getSelectedBackgroundColor",value:function(e){switch(e){case"fund":return"#9E0000";case"division":return"#C25A00";case"department":return"#0C5700";case"event":return"#001E85";case"gl":return"#600078";default:return"#2F2F2F"}}}]),Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.dataloader.addChangeCallback((function(){e.buildGroupWeightTable(),e.forceUpdate()}))}},{key:"buildGroupWeightTable",value:function(){var e=this;void 0!==this.state.groupBy&&"date"!==this.state.groupBy&&(this.groupWeight.clear(),this.props.dataloader.getCategories(this.state.groupBy).forEach((function(t){e.groupWeight.set(t.text,t.value)})),this.integratedSortingColumnExtensions=[{columnName:this.state.groupBy,compare:function(t,a){var n,r;return((null===(n=e.groupWeight)||void 0===n?void 0:n.get(t))||0)-((null===(r=e.groupWeight)||void 0===r?void 0:r.get(a))||0)}}])}},{key:"searchLock",value:function(e){this.searchValue=e,e?this.props.fullScreen():this.props.halfScreen()}},{key:"componentDidUpdate",value:function(e,t,a){this.state.groupBy!=t.groupBy&&(this.buildGroupWeightTable(),this.setState({sortingState:this.getGroupSortingState()}))}},{key:"render",value:function(){var e=this;this.props.dataloader.getPeekTable()&&this.props.dataloader.setPeekTable(!1),console.log(this.state.selectedColumn);var t=this.props.dataloader.getRecords().map((function(e,t){return e.id=t,e}));return!0===this.props.hidden?r.a.createElement(E.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{elevation:0},r.a.createElement(b.b,{rows:t,columns:this.columns},r.a.createElement(k.r,{sorting:this.state.sortingState}),r.a.createElement(k.h,{grouping:void 0!==this.state.groupBy?[{columnName:this.state.groupBy}]:[]}),r.a.createElement(k.p,{onValueChange:function(t){return e.searchLock(t)}}),r.a.createElement(k.t,{totalItems:this.summaryItems,groupItems:this.groupSummaryItems}),r.a.createElement(k.k,{columnExtensions:this.groupingColumnExtensions}),r.a.createElement(k.j,null),r.a.createElement(k.l,{columnExtensions:this.integratedSortingColumnExtensions}),r.a.createElement(k.m,null),r.a.createElement(k.b,{for:["amount"],formatterComponent:N}),r.a.createElement(k.b,{for:["date"],formatterComponent:A}),r.a.createElement(b.j,{columnExtensions:this.tableColumnExtension,height:650}),r.a.createElement(b.e,{defaultHiddenColumnNames:["id"]}),r.a.createElement(b.g,{cellComponent:this.TableHeaderCell}),r.a.createElement(b.f,{contentComponent:L,columnExtensions:this.groupExtension}),r.a.createElement(b.h,null),r.a.createElement(b.i,null),r.a.createElement(b.c,{showSortingControls:!0,emptyMessageComponent:function(){return r.a.createElement("span",null)}}),r.a.createElement(b.a,{startExport:function(t){var a;return null===(a=e.exporter.current)||void 0===a?void 0:a.exportGrid(t)}}),r.a.createElement(b.d,null)),r.a.createElement(C.a,{ref:this.exporter,columns:this.columns,rows:t,onSave:function(t){return e.onSave(t)}})))}},{key:"setHighlight",value:function(e){this.setState({selectedColumn:e.name}),this.setSorting(e)}},{key:"setSorting",value:function(e){ie(e.name)?this.props.onChange(e.name):"description"==e.name&&this.props.onChange("keyword")}},{key:"onSave",value:function(e){e.xlsx.writeBuffer().then((function(e){Object(w.saveAs)(new Blob([e],{type:"application/octet-stream"}),"Transactions-".concat(W.getInstance().getCurrentDatasetName(),".xlsx"))}))}},{key:"getGroupSortingState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.groupBy;return"date"===e?[{columnName:"date",direction:"asc"}]:void 0===e||"description"===e?[{columnName:"id",direction:"asc"}]:[{columnName:e,direction:"desc"}]}}]),a}(n.Component),I=a(563),G=a(138),R=a(562),T=a(560),P=a(552),U=a(564),z=a(555),Y=a(553),$=a(126),Q=a.n($),_=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={drawer:!1},n}return Object(s.a)(a,[{key:"setYear",value:function(){this.props.dataloader.sliceFilter(0),this.setState({drawer:!0})}},{key:"getColor",value:function(e){switch(e){case"fund":return"#FF6F6F";case"division":return"#FFBB7F";case"department":return"#A4F997";case"gl":return"#F0B6FF";case"event":return"#A2B8FF";default:return"#D0D0D0"}}},{key:"componentDidMount",value:function(){var e=this;this.props.dataloader.addChangeCallback((function(){return e.forceUpdate()}))}},{key:"render",value:function(){var e=this,t=this.props.dataloader,a=t.getFilters(),n=W.getInstance().getDatasets()||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{separator:">",style:this.props.style},r.a.createElement(G.a,{align:"center"},r.a.createElement("div",{style:{fontWeight:"bold",color:"black"}},"USAC Budget Filters")),r.a.createElement(G.a,{align:"center"},r.a.createElement(R.a,{title:"Remove This Filter"},r.a.createElement("div",{style:{backgroundColor:"#D0D0D0",cursor:"pointer",color:"black"},onClick:function(){return e.setYear()}},"year: ",W.getInstance().getCurrentDatasetName(),r.a.createElement("br",null),"$",f(t.getDatasetTotal())))),a.slice(0,-1).map((function(a,n){return r.a.createElement(G.a,{align:"center"},r.a.createElement(R.a,{title:"Remove This Filter"},r.a.createElement("div",{style:{backgroundColor:e.getColor(a.category),cursor:"pointer",color:"black"},onClick:function(){return t.sliceFilter(n)}},a.category,": ",a.name,r.a.createElement("br",null),"$",f(a.amount))))})),a.length>0?r.a.createElement(G.a,{color:"textPrimary",align:"center",key:a.length-1},r.a.createElement(R.a,{title:"Remove This Filter"},r.a.createElement("div",{onClick:function(){return t.sliceFilter(a.length-1)},style:{backgroundColor:this.getColor(a[a.length-1].category),cursor:"pointer"}},a[a.length-1].category,": ",a[a.length-1].name,r.a.createElement("br",null),"$",f(a[a.length-1].amount)))):null),r.a.createElement(T.a,{anchor:"left",open:this.state.drawer,onClose:function(){return e.setState({drawer:!1})}},r.a.createElement("div",{onClick:function(){return e.setState({drawer:!1})}},r.a.createElement(P.a,null,n.map((function(t){return r.a.createElement(U.a,{button:!0,key:t,onClick:function(){e.setState({drawer:!0}),W.getInstance().setCurrentDataset(t)}},r.a.createElement(z.a,null,r.a.createElement(Q.a,null)),r.a.createElement(Y.a,{primary:"Budget "+W.getDatasetTitle(t)}))}))))))}}]),a}(n.Component),K=a(18),V=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={pieDepth:0,category:n.props.category,selectedSlices:new Map},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.dataloader.addChangeCallback((function(){return e.forceUpdate()}))}},{key:"render",value:function(){var e=this,t=this.props.dataloader.getFilters();this.state.selectedSlices.forEach((function(a,n){for(var r=0;r<t.length;r++)if(t[r].category==n)return;e.state.selectedSlices.delete(n)}));var a=this.props.dataloader.getCategories(this.props.category),n=this.props.dataloader.getLastFilter();null==n||n.category===this.props.category&&n.name;return r.a.createElement("div",{style:{height:"60vh"},hidden:this.props.hidden||!1},this.props.hidden?null:r.a.createElement(K.k,{height:"100%",width:"100%"},r.a.createElement(K.i,null,r.a.createElement(K.h,{data:a,dataKey:"value",nameKey:"text",onClick:function(t){return e.clickSlice(t)},label:function(t){return e.renderCustomizedLabel(t,e.props.dataloader.getTotal())},labelLine:!1},a.map((function(t,a){return r.a.createElement(K.f,{key:"cell-".concat(a),fill:e.getColor(t)})}))),r.a.createElement(K.l,{formatter:function(e){return"$"+f(e)},contentStyle:{padding:"0 5px",margin:0,borderRadius:5}}))))}},{key:"renderCustomizedLabel",value:function(e,t){return e.value<.01*t?null:r.a.createElement("text",{fontSize:10,x:e.x,y:e.y,fill:"Black",textAnchor:e.x>e.cx?"start":"end",dominantBaseline:"central"},e.name)}},{key:"clickSlice",value:function(e){this.state.selectedSlices.set(this.props.category,e.text),this.props.dataloader.addCategoryFilter(this.props.category,e.text),this.props.dataloader.setPeekTable(!0)}},{key:"getColor",value:function(e){if(this.state.selectedSlices.has(this.props.category))if(this.state.selectedSlices.get(this.props.category)==e.text)switch(this.props.category){case"fund":return"#9E0000";case"division":return"#C25A00";case"department":return"#0C5700";case"event":return"#001E85";case"gl":return"#600078";default:return"#2F2F2F"}else switch(this.props.category){case"fund":return"#FFB3B3";case"division":return"#FFD9C3";case"department":return"#C3FFCD";case"gl":return"#EBC3FF";case"event":return"#C3D3FF"}else switch(this.props.category){case"fund":return"Red";case"division":return"Orange";case"department":return"Green";case"event":return"Blue";case"gl":return"Purple";default:return"Gray"}}}]),a}(n.Component),H=a(554),J=a(565),q=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={value:[0,100],data:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.dataloader.addChangeCallback((function(){return e.updateState()})),this.updateState()}},{key:"updateState",value:function(){var e=this.props.dataloader.getAmountBins(40),t=e.data,a=e.domain;this.setState({data:t,value:a})}},{key:"render",value:function(){var e=this,t=this.state.data,n=0===t.length?[0,1]:[t[0].low,t[t.length-1].high];return r.a.createElement("div",{style:{paddingLeft:"5%",paddingRight:"calc(5% + ".concat(a.getYAxisWidth(),"px)"),height:"65vh",margin:"auto"},hidden:this.props.hidden||!1},this.props.hidden?null:r.a.createElement(K.k,{height:"90%",width:"100%"},r.a.createElement(K.d,{data:t,barCategoryGap:0,margin:{bottom:0,left:0,right:0}},r.a.createElement(K.e,{strokeDasharray:"3 3"}),r.a.createElement(K.m,{dataKey:"name",domain:n,hide:!0,orientation:"top"}),r.a.createElement(K.n,{domain:[0,"dataMax"],tickFormatter:function(t){return Math.round(t/e.props.dataloader.getTotal()*100)+"%"},width:a.getYAxisWidth()},r.a.createElement(K.g,{angle:270,position:"insideLeft",style:{textAnchor:"middle"}},"Percent of USAC Budget")),r.a.createElement(K.j,{y:0,label:"",stroke:"black"}),r.a.createElement(K.c,{dataKey:"value",fill:this.getColor()},t.map((function(t,a){return r.a.createElement(K.f,{key:"cell-".concat(a),fill:e.getColor(),opacity:e.getOpacity(t.low,t.high)})}))))),r.a.createElement("div",{style:{paddingLeft:a.getYAxisWidth()}},r.a.createElement(J.a,{value:this.state.value,min:n[0],max:n[1],onChange:this.onRangeChange.bind(this),onChangeCommitted:this.onRangeChangeCommitted.bind(this),valueLabelDisplay:"auto",valueLabelFormat:function(e){return"$"+f(e)},marks:this.getMarks(n),"aria-labelledby":"Amount-slider"})))}},{key:"onRangeChange",value:function(e,t){this.setState({value:t})}},{key:"onRangeChangeCommitted",value:function(e,t){var a=t;this.props.dataloader.addAmountFilter(a[0],a[1])}},{key:"getColor",value:function(){return"Gray"}},{key:"getOpacity",value:function(e,t){return.3+.7*(Math.max(0,Math.min(this.state.value[1],t)-Math.max(this.state.value[0],e))/(t-e))}},{key:"getMarkPoint",value:function(e){return{value:e,label:"$"+f(e)}}},{key:"getMarks",value:function(e){var t=this,n=60/(.8*a.getViewportWidth()-a.getYAxisWidth())*(e[1]-e[0]),r=e.map((function(e){return t.getMarkPoint(e)}));e[0]<0&&e[1]>0&&(r=r.filter((function(e){return Math.abs(e.value)>=n}))).push(this.getMarkPoint(0));for(var i=Math.max((e[1]-e[0])/10,n),o=1;e[0]+o*i<=e[1]-n;o++){var l=Number.parseFloat((e[0]+o*i).toPrecision(2));Math.abs(l)<.9*i||r.push(this.getMarkPoint(l))}return r}}],[{key:"getViewportWidth",value:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)}},{key:"getYAxisWidth",value:function(){return a.getViewportWidth()<480?0:72}}]),a}(n.Component),X=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Z=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={value:[0,1],domain:["0000-01","9999-12"],data:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.dataloader.addChangeCallback((function(){return e.updateState()})),this.updateState()}},{key:"updateState",value:function(){var e=this.props.dataloader.getMonthBins(),t=e.data,a=e.domain,n=t.map((function(e){return e.text}));this.setState({data:t,value:[n.indexOf(a[0])+.5,n.indexOf(a[1])+.5]})}},{key:"render",value:function(){var e=this.state.data;return r.a.createElement("div",{style:{paddingLeft:"5%",paddingRight:"calc(5% + ".concat(a.getYAxisWidth(),"px)"),height:"65vh",margin:"auto"},hidden:this.props.hidden||!1},this.props.hidden?null:r.a.createElement(K.k,{height:"90%",width:"100%"},r.a.createElement(K.b,{data:e,barCategoryGap:0,margin:{bottom:0,left:0,right:0}},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"fillGrad",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:this.getColor(),stopOpacity:.9}),r.a.createElement("stop",{offset:"95%",stopColor:this.getColor(),stopOpacity:.3})),r.a.createElement("linearGradient",{id:"fillGrad2",x1:"0",y1:"0",x2:"1",y2:"0"},r.a.createElement("stop",{offset:this.getLeftPoint()-.01,stopColor:this.getColor(),stopOpacity:.2}),r.a.createElement("stop",{offset:this.getLeftPoint()+.01,stopColor:this.getColor(),stopOpacity:.6}),r.a.createElement("stop",{offset:this.getRightPoint()-.01,stopColor:this.getColor(),stopOpacity:.6}),r.a.createElement("stop",{offset:this.getRightPoint()+.01,stopColor:this.getColor(),stopOpacity:.2}))),r.a.createElement(K.e,{strokeDasharray:"3 3"}),r.a.createElement(K.m,{dataKey:"text",hide:!0,orientation:"top",scale:"band"}),r.a.createElement(K.n,{tickFormatter:function(e){return"$"+f(e)},width:a.getYAxisWidth()},r.a.createElement(K.g,{angle:270,position:"insideLeft",style:{textAnchor:"middle"}},"Monthly Expense ($)")),r.a.createElement(K.l,{formatter:function(e){return"$"+f(e)},contentStyle:{display:"none"}}),r.a.createElement(K.j,{y:0,label:"",stroke:"black"}),r.a.createElement(K.a,{type:"monotone",dataKey:"value",stroke:this.getColor(),fillOpacity:1,fill:"url(#fillGrad2)"}))),r.a.createElement("div",{style:{paddingLeft:a.getYAxisWidth()}},r.a.createElement(J.a,{value:this.state.value,min:0,max:this.state.data.length,onChange:this.onRangeChange.bind(this),onChangeCommitted:this.onRangeChangeCommitted.bind(this),valueLabelDisplay:"off",marks:this.getMarks(this.state.data),step:null,"aria-labelledby":"Date-slider"})))}},{key:"onRangeChange",value:function(e,t){this.setState({value:t})}},{key:"onRangeChangeCommitted",value:function(e,t){var a=t.map((function(e){return Math.round(e-.5)})),n=this.state.data;this.props.dataloader.addMonthFilter(n[a[0]].text,n[a[1]].text)}},{key:"getColor",value:function(){return"Gray"}},{key:"getOpacity",value:function(e){return e+=.5,this.state.value[0]<=e&&e<=this.state.value[1]?1:.3}},{key:"getLeftPoint",value:function(){return(this.state.value[0]-1)/(this.state.data.length-1)}},{key:"getRightPoint",value:function(){return this.state.value[1]/(this.state.data.length-1)}},{key:"getMarks",value:function(e){var t=e.map((function(e,t){return{value:t+.5,label:e.text}})),a=new Set;return t.forEach((function(e,n){var r=e.label.split("-");a.has(r[0])?t[n].label=X[Number.parseInt(r[1])-1]:(a.add(r[0]),t[n].label=X[Number.parseInt(r[1])-1]+" ".concat(r[0]))})),t}}],[{key:"getViewportWidth",value:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)}},{key:"getYAxisWidth",value:function(){return this.getViewportWidth()<480?0:72}}]),a}(n.Component);function ee(e){switch(e.category){case"date":return r.a.createElement(G.a,{color:"textSecondary",style:{fontSize:16}},"Date transaction entered. (purchases occur beforehand)");case"fund":return r.a.createElement(G.a,{color:"textSecondary",style:{fontSize:16}},"Source of money (includes student fees and other income)");case"division":return r.a.createElement(G.a,{color:"textSecondary",style:{fontSize:16}},"Allocates money to departments.");case"department":return r.a.createElement(G.a,{color:"textSecondary",style:{fontSize:16}},"Spends money (includes student groups)");case"gl":return r.a.createElement(G.a,{color:"textSecondary",style:{fontSize:16}},"Rules for how each $ can be spent.");case"event":return r.a.createElement(G.a,{color:"textSecondary",style:{fontSize:16}},"Occasion/reason for transaction. ( generic label is \u201cCommission/Dept related\u201d)");case"keyword":return r.a.createElement(G.a,{color:"textSecondary",style:{fontSize:16}},"How the departments said they spent money. Accountant abreviates. Wordcloud deabreviates. Font size of word represents total $ for all descriptions that include word.");case"amount":return r.a.createElement(G.a,{color:"textSecondary",style:{fontSize:16}},"Size of each transaction. (may include several purchases)");case"table":return r.a.createElement(G.a,{color:"textSecondary",style:{fontSize:16}},"Above is the raw transaction table of the Undergraduate Student Association. Click on a column to visualize it.",r.a.createElement("br",null),"Low on time? Most important is the descriptions column. Everything else is administrative.");case"footer":return r.a.createElement(G.a,{color:"textSecondary",style:{fontSize:16}},"We had to de-abbreviate them, but sometimes did that incorrectly, so please comment at the bottom of the page if you see that.",r.a.createElement("br",null),"These abbreviations had to be autocorrected so they can be categorized in the visual. If autocorrect groups transactions incorrectly, please comment at the bottom of the page.");default:return r.a.createElement("div",null)}}var te=a(267),ae=a.n(te),ne=a(173),re=a.n(ne);function ie(e){return O(e)||["table","keyword","amount","date"].includes(e)}var oe=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).value="keyword",n.value="keyword",n.state={value:n.value,width:"43%"},x.getInstance().addGenerator(n.generateQuery.bind(Object(d.a)(n)),1),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.loader.addChangeCallback((function(){return e.forceUpdate()})),setTimeout((function(){alert("Please adjust your screen's zoom so it fits the entire budget viewer.")}),2e3)}},{key:"parseQuery",value:function(e){"?"===e[0]&&(e=e.slice(1));var t=e.split("&").filter((function(e){return e.startsWith("tab=")}));if(0===t.length)return"table";var a=t[0].substr(4);return ie(a)?a:"table"}},{key:"generateQuery",value:function(){return"tab="+this.value}},{key:"onTabChange",value:function(e){this.value=ie(e)?e:"table",this.setState({value:this.value}),x.getInstance().update()}},{key:"fullScreen",value:function(){this.setState({width:"90%"})}},{key:"halfScreen",value:function(){this.setState({width:"43%"})}},{key:"copyURL",value:function(){var e=document.createElement("textarea");e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.opacity="0",e.value=window.location.href,document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy"),document.body.removeChild(e),alert("Link Copied to Clipboard! (filters saved)")}},{key:"render",value:function(){var e=this,t=this.props.loader,a="keyword"===this.state.value?"description":this.state.value;return a=a.charAt(0).toUpperCase()+a.slice(1),r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{marginLeft:30,marginRight:30}},r.a.createElement(_,{dataloader:t})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{style:{float:"left",width:this.state.width,marginLeft:40,height:600,marginRight:40}},r.a.createElement(B,{dataloader:t,onChange:this.onTabChange.bind(this),style:{backgroundColor:"lightblue"},fullScreen:function(){return e.fullScreen()},halfScreen:function(){return e.halfScreen()}})),"43%"===this.state.width?r.a.createElement("div",{style:{float:"right",width:"43%",marginRight:40}},r.a.createElement("h1",null,a),r.a.createElement(ee,{category:this.state.value}),r.a.createElement(v,{hidden:"keyword"!==this.state.value,dataloader:t}),r.a.createElement(V,{hidden:!O(this.state.value),category:O(this.state.value)?this.state.value:"fund",dataloader:t}),r.a.createElement(q,{hidden:"amount"!==this.state.value,dataloader:t}),r.a.createElement(Z,{hidden:"date"!==this.state.value,dataloader:t})):null,r.a.createElement("div",{style:{marginTop:750,color:"black"}},r.a.createElement("a",{href:"mailto:vtran@asucla.ucla.edu",style:{padding:20,color:"black"}},r.a.createElement(re.a,null)," Professional Accountant"),r.a.createElement("a",{href:"mailto:usacouncil@asucla.ucla.edu",style:{padding:20,color:"black"}},r.a.createElement(re.a,null)," USAC Council"),r.a.createElement(H.a,{style:{color:"black",textDecoration:"underline"},onClick:this.copyURL,"aria-label":"share"},"Copy link"),r.a.createElement(h.b,{to:"/help-page/",style:{color:"black"}},r.a.createElement(H.a,{"aria-label":"share"},r.a.createElement(ae.a,null),"Help"))))}}]),a}(r.a.Component),le=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=W.getInstance().getDatasets()||[];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{style:{textAlign:"center"}},"Choose a year"),r.a.createElement(P.a,null,t.map((function(t){return r.a.createElement(U.a,{alignItems:"center",button:!0,key:t,onClick:function(){W.getInstance().setCurrentDataset(t),e.props.close()}},r.a.createElement(Y.a,{primary:"Budget "+W.getDatasetTitle(t),style:{textAlign:"center"}}))}))))}}]),a}(r.a.Component),se=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).selectYear=function(){n.setState({yearSelected:!0})},n.state={loader:W.getInstance().getDataLoader(),yearSelected:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;W.getInstance().addChangeCallback((function(){e.setState({loader:W.getInstance().getDataLoader()})}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,!0===this.state.yearSelected?r.a.createElement(oe,{loader:this.state.loader}):r.a.createElement(le,{close:this.selectYear}))}}]),a}(r.a.Component),ue=a(556),ce=a(561),de=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(ue.a,{style:{border:"groove",margin:"auto",width:1e3,backgroundColor:"lightgray"}},r.a.createElement("br",null),r.a.createElement("div",{style:{float:"right",marginRight:20}},r.a.createElement(h.b,{to:{pathname:"/USAC-budget/",search:"?d=2019&tab=keyword&"}},r.a.createElement(ce.a,{style:{backgroundColor:"red",color:"black",fontWeight:"bold"}},"X"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("iframe",{width:"960",height:"600",style:{marginLeft:20,marginRight:20},src:"https://www.youtube.com/embed/PwSO7l-iRLQ"}),r.a.createElement("br",null),r.a.createElement("br",null)))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=a(23);o.a.render(r.a.createElement(h.a,null,r.a.createElement(he.d,null,r.a.createElement(he.d,null,r.a.createElement(he.b,{path:"/year-select/",render:function(e){return r.a.createElement(le,e)}}),r.a.createElement(he.b,{path:"/USAC-budget/",render:function(e){return r.a.createElement(se,e)}}),r.a.createElement(he.b,{path:"/help-page/",render:function(e){return r.a.createElement(de,e)}}),r.a.createElement(he.a,{from:"/index",to:"/USAC-budget/"}),r.a.createElement(he.a,{from:"/",to:"/USAC-budget/"})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[297,1,2]]]);
//# sourceMappingURL=main.5f36dccc.chunk.js.map