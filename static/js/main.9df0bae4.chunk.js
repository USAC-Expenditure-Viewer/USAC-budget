(this.webpackJsonpbudget_wc=this.webpackJsonpbudget_wc||[]).push([[0],{107:function(t,e){},113:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(29),o=a.n(i),s=(a(96),a(97),a(10)),l=a(11),c=a(33),u=a(23),h=a(21),d=(a(32),a(137)),f=a(83);function b(t){if(Number.isNaN(t))return"";var e=t.toFixed(2).split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function m(t){if(Number.isNaN(t))return"";var e="";return t>=1e6?(e="M",t/=1e6):t>=1e3&&(e="K",t/=1e3),t.toPrecision(3)+e}var p=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).callbacks={getWordTooltip:function(t){return"".concat(t.text," has $").concat(m(t.value)," in the category.")},onWordClick:n.getCallback("onWordClick").bind(Object(c.a)(n)),onWordMouseOut:n.getCallback("onWordMouseOut").bind(Object(c.a)(n)),onWordMouseOver:n.getCallback("onWordMouseOver").bind(Object(c.a)(n))},n.options={fontFamily:"impact",fontSizes:[5,60],fontStyle:"normal",fontWeight:"normal",scale:"log",deterministic:!0,rotations:4,rotationAngles:[-45,90],transitionDuration:200},n.state={words:[{text:"Loading...",value:100}]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.dataloader.addWordsCallback(this.setWords.bind(this))}},{key:"render",value:function(){return r.a.createElement("div",{style:this.props.style},r.a.createElement(f.a,{callbacks:this.callbacks,words:this.state.words,options:this.options}))}},{key:"getCallback",value:function(t){return function(e,a){var n=this,r="onWordMouseOut"!==t,i=a.target;Object(d.a)(i).on("click",(function(){r&&n.props.keywordlist.addWord(e.text)})).transition().attr("background","white").attr("text-decoration",r?"underline":"none")}}},{key:"setWords",value:function(t){this.setState({words:t})}}]),a}(n.Component),v=a(115),y=a(140),g=a(141),k=a(142),O=a(143),j=a(144),E=a(145),w=a(146),x=a(154),C=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).state={records:[],order:"asc",orderBy:null},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.dataloader.addRecordCallback(this.setRecords.bind(this))}},{key:"setRecords",value:function(t){this.setState({records:t,order:"asc",orderBy:null})}},{key:"handleRequestSort",value:function(t,e){var a=this.state.orderBy===e&&"asc"===this.state.order,n=this.state.orderBy===e&&"desc"===this.state.order;this.setState({order:a?"desc":"asc",orderBy:n?null:e})}},{key:"render",value:function(){return r.a.createElement(v.a,{style:this.props.style},r.a.createElement(y.a,{style:{height:"100%"}},r.a.createElement(g.a,{stickyHeader:!0,size:"small","aria-label":"Transaction Records"},r.a.createElement(W,{order:this.state.order,orderBy:this.state.orderBy,onRequestSort:this.handleRequestSort.bind(this)}),r.a.createElement(k.a,null,this.stableSort(this.state.records).map((function(t,e){return r.a.createElement(O.a,{key:e},r.a.createElement(j.a,null,new Date(1e3*t.date).toDateString()),r.a.createElement(j.a,null,t.department),r.a.createElement(j.a,null,t.description),r.a.createElement(j.a,null,b(t.amount)))}))),r.a.createElement(E.a,{style:{position:"sticky",bottom:0,backgroundColor:"#fafafa",borderTop:1,borderTopColor:"#e0e0e0"}},r.a.createElement(O.a,null,r.a.createElement(j.a,null),r.a.createElement(j.a,null),r.a.createElement(j.a,{align:"right"},"Total: "),r.a.createElement(j.a,null,b(this.state.records.reduce((function(t,e){return t+e.amount}),0))))))))}},{key:"getComparator",value:function(){var t=this,e=function(t,e,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0};return null===this.state.orderBy?null:"asc"===this.state.order?function(a,n){return e(a,n,t.state.orderBy)}:function(a,n){return-e(a,n,t.state.orderBy)}}},{key:"stableSort",value:function(t){var e=this.getComparator();if(null===e)return t;var a=t.map((function(t,e){return[t,e]}));return a.sort((function(t,a){var n=e(t[0],a[0]);return 0!==n?n:t[1]-a[1]})),a.map((function(t){return t[0]}))}}]),a}(n.Component),S=[{id:"date",label:"Date"},{id:"department",label:"Department"},{id:"description",label:"Description"},{id:"amount",label:"Amount"}],W=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"createSortHandler",value:function(t){var e=this;return function(a){return e.props.onRequestSort(a,t)}}},{key:"render",value:function(){var t=this;return r.a.createElement(w.a,null,r.a.createElement(O.a,null,S.map((function(e){return r.a.createElement(j.a,{key:e.id,sortDirection:t.props.orderBy===e.id&&t.props.order},r.a.createElement(x.a,{active:t.props.orderBy===e.id,direction:t.props.orderBy===e.id?t.props.order:"asc",onClick:t.createSortHandler(e.id)},e.label))}))))}}]),a}(n.Component),B=a(153),A=a(116),L=a(147),M=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).state={numList:0,amounts:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.props.dataloader.addAmountCallback((function(e){return t.changeList(e)}))}},{key:"render",value:function(){var t=this,e=this.props.keywordlist.getList();return r.a.createElement(B.a,{separator:">",style:this.props.style},r.a.createElement(L.a,{key:-1,color:"textPrimary",onClick:function(){return t.props.keywordlist.reset()}},"Transactions($",this.state.amounts[0],")"),e.slice(0,-1).map((function(e,a){return r.a.createElement(L.a,{key:a,color:"textSecondary",onClick:function(){return t.props.keywordlist.sliceWord(e)}},e,"($",t.state.amounts[a+1],")")})),e.length>0?r.a.createElement(A.a,{color:"textPrimary",key:e.length},e[e.length-1],"($",this.state.amounts[e.length],")"):null)}},{key:"changeList",value:function(t){for(var e=this.props.keywordlist.getList().length,a=this.state.amounts;a.length<e+1;)a=a.concat("");a.length>e+1&&(a=a.slice(0,e+1)),a[e]=m(t),this.setState({numList:e,amounts:a})}}]),a}(n.Component),R=function(){function t(){Object(s.a)(this,t),this.list=void 0,this.callback=void 0,this.list=[],this.callback=[]}return Object(l.a)(t,[{key:"addChangeCallback",value:function(t){this.callback.push(t)}},{key:"addWord",value:function(t){var e=this;this.list.includes(t)||(this.list.push(t),this.callback.forEach((function(t){return t(e.list)})))}},{key:"sliceWord",value:function(t){var e=this,a=this.list.indexOf(t);-1!==a&&(this.list=this.list.slice(0,a+1),this.callback.forEach((function(t){return t(e.list)})))}},{key:"reset",value:function(){var t=this;this.list=[],this.callback.forEach((function(e){return e(t.list)}))}},{key:"getList",value:function(){return this.list}}]),t}(),D=a(20),T=a(18),P=a(9),N=a(38),_=function(){function t(e,a){var n=this;Object(s.a)(this,t),Object.defineProperty(this,Y,{writable:!0,value:null}),Object.defineProperty(this,$,{writable:!0,value:[]}),Object.defineProperty(this,q,{writable:!0,value:[]}),Object.defineProperty(this,z,{writable:!0,value:[]}),Object.defineProperty(this,H,{writable:!0,value:void 0}),fetch(e).then((function(t){return t.json()})).then((function(t){Object(P.a)(n,Y)[Y]=t,n.listChangeCallback()})),Object(P.a)(this,H)[H]=a,a.addChangeCallback((function(){return n.listChangeCallback()}))}return Object(l.a)(t,[{key:"listChangeCallback",value:function(){var t=this.getRecords(Object(P.a)(this,H)[H].getList());Object(P.a)(this,$)[$].forEach((function(e){return e(t)}));var e=this.getTotal(t);Object(P.a)(this,z)[z].forEach((function(t){return t(e)}));var a=this.getWordList(t);Object(P.a)(this,q)[q].forEach((function(t){return t(a)}))}},{key:"addRecordCallback",value:function(t){Object(P.a)(this,$)[$].push(t)}},{key:"addWordsCallback",value:function(t){Object(P.a)(this,q)[q].push(t)}},{key:"addAmountCallback",value:function(t){Object(P.a)(this,z)[z].push(t)}},{key:"getRecords",value:function(t){return null===Object(P.a)(this,Y)[Y]?[{date:0,department:"",description:"Loading...",amount:0,words:[]}]:null===t||t===[]?Object(P.a)(this,Y)[Y]:Object(P.a)(this,Y)[Y].filter((function(e){return t.map((function(t){return e.words.includes(t)})).reduce((function(t,e){return t&&e}),!0)}))}},{key:"getWordList",value:function(t){if(null===Object(P.a)(this,Y)[Y])return[{text:"Loading...",value:100}];var e=new Map;t.forEach((function(t){t.words.forEach((function(a){e.set(a,(e.get(a)||0)+t.amount)}))}));var a,n=[],r=Object(T.a)(e.entries());try{for(r.s();!(a=r.n()).done;){var i=Object(D.a)(a.value,2),o=i[0],s=i[1];n.push({text:o,value:s})}}catch(l){r.e(l)}finally{r.f()}return n.sort((function(t,e){return t.value-e.value})),n}},{key:"getTotal",value:function(t){return t.reduce((function(t,e){return t+e.amount}),0)}}]),t}(),Y=Object(N.a)("data"),$=Object(N.a)("records_callbacks"),q=Object(N.a)("words_callbacks"),z=Object(N.a)("amount_callbacks"),H=Object(N.a)("keywordList"),F=a(148),X=a(149),J=a(150),Z=a(82),I=a.n(Z);function K(){return r.a.createElement(F.a,{position:"sticky"},r.a.createElement(X.a,null,r.a.createElement(J.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(I.a,null)),r.a.createElement(A.a,{variant:"h6"},"USAC Budget/Spendings 2018-2019")))}var U=a(85),V=a(151),G=a(138),Q=a(84),tt=a(48),et=a(58),at=a(152),nt={tooltip:{position:"absolute",textAlign:"center",padding:5,font:"12px sans-serif",background:"lightsteelblue",border:0,borderRadius:8,pointerEvents:"none"}},rt=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).state={data:[]},n.margin={top:20,right:0,bottom:30,left:80},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.dataloader.addWordsCallback(this.setWords.bind(this)),this.height=this.divElement.clientHeight,this.width=this.divElement.clientWidth,this.setState({height:this.height,width:this.width})}},{key:"render",value:function(){var t=this;return this.renderChart(),r.a.createElement("div",{style:this.props.style,ref:function(e){t.divElement=e}},r.a.createElement("div",{style:nt.tooltip,ref:function(e){t.tooltip=e}}),r.a.createElement("svg",{ref:function(e){return t.svgElement=e},width:this.state.width,height:this.state.height,viewBox:[0,0,this.width,this.height]}))}},{key:"setWords",value:function(t){this.setState({data:t.filter((function(t){return t.value>0}))})}},{key:"renderChart",value:function(){var t=this;this.xScale=Object(U.a)().domain([0,Object(G.a)(this.state.data,(function(t){return t.value}))]).nice().range([this.margin.left,this.width-this.margin.right]),this.yScale=Object(V.a)().domain(this.state.data.map((function(t){return t.text}))).range([this.height-this.margin.bottom,this.margin.top]).padding(.1),Object(d.a)(this.svgElement).selectAll("*").remove(),Object(d.a)(this.svgElement).call(this.setChartZoom.bind(this)),Object(d.a)(this.tooltip).style("opacity",0),Object(d.a)(this.svgElement).append("g").attr("class","bars").attr("fill","steelblue").selectAll("rect").data(this.state.data).join("rect").attr("x",this.xScale(0)).attr("y",(function(e){return t.yScale(e.text)})).attr("height",this.yScale.bandwidth()).attr("width",(function(e){return t.xScale(e.value)-t.xScale(0)})).call(this.setTooltip.bind(this)),Object(d.a)(this.svgElement).append("g").attr("class","x-axis").call(this.setXAxis.bind(this)),Object(d.a)(this.svgElement).append("g").attr("class","y-axis").call(this.setYAxis.bind(this))}},{key:"setTooltip",value:function(t){var e=this;t.on("mouseover",(function(t){Object(d.a)(e.tooltip).transition().duration(200).style("opacity",.9),Object(d.a)(e.tooltip).html(t.text+"<br>"+m(t.value)).style("left",tt.c.pageX+"px").style("top",tt.c.pageY-28+"px")})).on("mouseout",(function(t){Object(d.a)(e.tooltip).transition().duration(500).style("opacity",0)})).on("click",(function(t){e.props.keywordlist.addWord(t.text)}))}},{key:"setChartZoom",value:function(t){var e=this.margin,a=this.yScale,n=this.setYAxis.bind(this),r=[[e.left,e.top],[this.width-e.right,this.height-e.top]],i=this.height;t.call(Object(Q.a)().scaleExtent([1,this.state.data.length/10]).translateExtent(r).extent(r).on("zoom",(function(){a.range([i-e.bottom,e.top].map((function(t){return tt.c.transform.applyY(t)}))),t.selectAll(".bars rect").attr("y",(function(t){return a(t.text)})).attr("height",a.bandwidth()),t.selectAll(".y-axis").call(n)})))}},{key:"setXAxis",value:function(t){t.attr("transform","translate(0,".concat(this.margin.top,")")).call(Object(et.b)(this.xScale).tickFormat(Object(at.a)("~s")).tickSizeOuter(0))}},{key:"setYAxis",value:function(t){var e=this;t.attr("transform","translate(".concat(this.margin.left,",0)")).call(Object(et.a)(this.yScale).tickValues(this.yScale.domain().filter((function(t,a){return a%Math.max(Math.round(18/e.yScale.bandwidth()),1)===0})))).call((function(t){return t.select(".domain").remove()}))}}]),a}(n.Component);var it=function(){var t=new R,e=new _(window.location.pathname+"/expense_summary.json",t);return r.a.createElement("div",null,r.a.createElement(K,null),r.a.createElement(v.a,{variant:"outlined",className:"App",style:{margin:"0 10%"}},r.a.createElement(M,{style:{margin:10},keywordlist:t,dataloader:e}),r.a.createElement(p,{style:{height:"80vh"},keywordlist:t,dataloader:e}),r.a.createElement(rt,{style:{height:"80vh",width:"100%"},keywordlist:t,dataloader:e}),r.a.createElement(C,{style:{height:"80vh"},dataloader:e})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(it,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},91:function(t,e,a){t.exports=a(113)},96:function(t,e,a){},97:function(t,e,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.9df0bae4.chunk.js.map