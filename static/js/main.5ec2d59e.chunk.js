(this.webpackJsonpbudget_wc=this.webpackJsonpbudget_wc||[]).push([[0],{77:function(t,e,a){t.exports=a(99)},82:function(t,e,a){},83:function(t,e,a){},93:function(t,e){},99:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(22),i=a.n(o),c=(a(82),a(83),a(12)),s=a(13),l=a(24),u=a(20),d=a(19),h=(a(56),a(121)),f=a(71);function b(t){if(Number.isNaN(t))return"";var e=(t=Number.parseFloat(t).toFixed(2).toString()).split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function m(t){if(Number.isNaN(t))return"";var e="";return(t=Number.parseFloat(t).toPrecision(3))>=1e6?(e="M",t/=1e6):t>=1e3&&(e="K",t/=1e3),t.toString()+e}var p=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).callbacks={getWordTooltip:function(t){return"".concat(t.text," has $").concat(m(t.value)," in the category.")},onWordClick:n.getCallback("onWordClick").bind(Object(l.a)(n)),onWordMouseOut:n.getCallback("onWordMouseOut").bind(Object(l.a)(n)),onWordMouseOver:n.getCallback("onWordMouseOver").bind(Object(l.a)(n))},n.options={fontFamily:"impact",fontSizes:[5,60],fontStyle:"normal",fontWeight:"normal",scale:"log",deterministic:!0,rotations:4,rotationAngles:[-45,90],transitionDuration:200},n.state={words:[{text:"Loading...",value:100}]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.dataLoader.addWordsCallback(this.setWords.bind(this))}},{key:"render",value:function(){return r.a.createElement(f.a,{style:this.props.style,callbacks:this.callbacks,words:this.state.words,options:this.options})}},{key:"getCallback",value:function(t){return function(e,a){var n=this,r="onWordMouseOut"!==t,o=a.target;Object(h.a)(o).on("click",(function(){r&&n.props.keywordList.addWord(e.text)})).transition().attr("background","white").attr("text-decoration",r?"underline":"none")}}},{key:"setWords",value:function(t){this.setState({words:t})}}]),a}(n.Component),v=a(100),y=a(122),k=a(123),g=a(124),O=a(125),j=a(126),E=a(127),w=a(128),C=a(134),L=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={records:[],order:"asc",orderBy:null},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.dataLoader.addRecordCallback(this.setRecords.bind(this))}},{key:"setRecords",value:function(t){this.setState({records:t,order:"asc",orderBy:null})}},{key:"handleRequestSort",value:function(t,e){var a=this.state.orderBy===e&&"asc"===this.state.order,n=this.state.orderBy===e&&"desc"===this.state.order;this.setState({order:a?"desc":"asc",orderBy:n?null:e})}},{key:"render",value:function(){return r.a.createElement(v.a,{style:this.props.style},r.a.createElement(y.a,{style:{height:"100%"}},r.a.createElement(k.a,{stickyHeader:!0,size:"small","aria-label":"Transaction Records"},r.a.createElement(W,{order:this.state.order,orderBy:this.state.orderBy,onRequestSort:this.handleRequestSort.bind(this)}),r.a.createElement(g.a,null,this.stableSort(this.state.records).map((function(t,e){return r.a.createElement(O.a,{key:e},r.a.createElement(j.a,null,new Date(1e3*t.date).toDateString()),r.a.createElement(j.a,null,t.department),r.a.createElement(j.a,null,t.description),r.a.createElement(j.a,null,b(t.amount)))}))),r.a.createElement(E.a,{style:{position:"sticky",bottom:0,backgroundColor:"#fafafa",borderTop:1,borderTopColor:"#e0e0e0"}},r.a.createElement(O.a,null,r.a.createElement(j.a,null),r.a.createElement(j.a,null),r.a.createElement(j.a,{align:"right"},"Total: "),r.a.createElement(j.a,null,b(this.state.records.reduce((function(t,e){return t+e.amount}),0))))))))}},{key:"getComparator",value:function(){var t=this,e=function(t,e,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0};return null===this.state.orderBy?null:"asc"===this.state.order?function(a,n){return e(a,n,t.state.orderBy)}:function(a,n){return-e(a,n,t.state.orderBy)}}},{key:"stableSort",value:function(t){var e=this.getComparator();if(null===e)return t;var a=t.map((function(t,e){return[t,e]}));return a.sort((function(t,a){var n=e(t[0],a[0]);return 0!==n?n:t[1]-a[1]})),a.map((function(t){return t[0]}))}}]),a}(n.Component),S=[{id:"date",label:"Date"},{id:"department",label:"Department"},{id:"description",label:"Description"},{id:"amount",label:"Amount"}],W=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"createSortHandler",value:function(t){var e=this;return function(a){return e.props.onRequestSort(a,t)}}},{key:"render",value:function(){var t=this;return r.a.createElement(w.a,null,r.a.createElement(O.a,null,S.map((function(e){return r.a.createElement(j.a,{key:e.id,sortDirection:t.props.orderBy===e.id&&t.props.order},r.a.createElement(C.a,{active:t.props.orderBy===e.id,direction:t.props.orderBy===e.id?t.props.order:"asc",onClick:t.createSortHandler(e.id)},e.label))}))))}}]),a}(n.Component),B=a(133),x=a(101),R=a(129),D=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).props.dataLoader.addAmountCallback((function(t){return n.changeList(t)})),n.state={numList:0,amounts:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this;console.log(this.state.numList,this.state.amounts);var e=this.props.keywordList.getList();return r.a.createElement(B.a,{separator:">",style:this.props.style},r.a.createElement(R.a,{color:"textPrimary",onClick:function(){return t.props.keywordList.reset()}},"Transactions(",this.state.amounts[0],")"),e.slice(0,-1).map((function(e,a){return r.a.createElement(R.a,{color:"textSecondary",onClick:function(){return t.props.keywordList.sliceWord(e)}},e,"(",t.state.amounts[a+1],")")})),e.length>0?r.a.createElement(x.a,{color:"textPrimary"},e[e.length-1],"(",this.state.amounts[e.length],")"):null)}},{key:"changeList",value:function(t){for(var e=this.props.keywordList.getList().length,a=this.state.amounts;a.length<e+1;)a=a.concat("");a.length>e+1&&(a=a.slice(0,e+1)),a[e]=m(t),this.setState({numList:e,amounts:a})}}]),a}(n.Component),M=function(){function t(){Object(c.a)(this,t),this.list=[],this.callback=[]}return Object(s.a)(t,[{key:"addChangeCallback",value:function(t){this.callback.push(t)}},{key:"addWord",value:function(t){var e=this;this.list.includes(t)||(this.list.push(t),this.callback.forEach((function(t){return t(e.list)})))}},{key:"sliceWord",value:function(t){var e=this,a=this.list.indexOf(t);-1!==a&&(this.list=this.list.slice(0,a+1),this.callback.forEach((function(t){return t(e.list)})))}},{key:"reset",value:function(){var t=this;this.list=[],this.callback.forEach((function(e){return e(t.list)}))}},{key:"getList",value:function(){return this.list}}]),t}(),N=a(8),P=a(29),T=function(){function t(e,a){var n=this;Object(c.a)(this,t),Object.defineProperty(this,A,{writable:!0,value:null}),Object.defineProperty(this,_,{writable:!0,value:[]}),Object.defineProperty(this,q,{writable:!0,value:[]}),Object.defineProperty(this,F,{writable:!0,value:[]}),Object.defineProperty(this,H,{writable:!0,value:void 0}),fetch(e).then((function(t){return t.json()})).then((function(t){Object(N.a)(n,A)[A]=t,n.listChangeCallback()})),Object(N.a)(this,H)[H]=a,a.addChangeCallback((function(){return n.listChangeCallback()}))}return Object(s.a)(t,[{key:"listChangeCallback",value:function(){var t=this.getRecords(Object(N.a)(this,H)[H].getList());Object(N.a)(this,_)[_].forEach((function(e){return e(t)}));var e=this.getTotal(t);Object(N.a)(this,F)[F].forEach((function(t){return t(e)}));var a=this.getWordList(t);Object(N.a)(this,q)[q].forEach((function(t){return t(a)}))}},{key:"addRecordCallback",value:function(t){Object(N.a)(this,_)[_].push(t)}},{key:"addWordsCallback",value:function(t){Object(N.a)(this,q)[q].push(t)}},{key:"addAmountCallback",value:function(t){Object(N.a)(this,F)[F].push(t)}},{key:"getRecords",value:function(t){return null===Object(N.a)(this,A)[A]?[{date:"",department:"",description:"Loading...",amount:""}]:null===t||t===[]?Object(N.a)(this,A)[A]:Object(N.a)(this,A)[A].filter((function(e){return t.map((function(t){return e.words.includes(t)})).reduce((function(t,e){return t&&e}),!0)}))}},{key:"getWordList",value:function(t){if(null===Object(N.a)(this,A)[A])return[{text:"Loading...",value:100}];var e={};t.forEach((function(t){t.words.forEach((function(a){void 0===e[a]?e[a]=t.amount:e[a]+=t.amount}))}));var a=[];for(var n in e)a.push({text:n,value:e[n]});return a.sort((function(t,e){return t.value-e.value})),a}},{key:"getTotal",value:function(t){return t.reduce((function(t,e){return t+e.amount}),0)}}]),t}(),A=Object(P.a)("data"),_=Object(P.a)("records_callbacks"),q=Object(P.a)("words_callbacks"),F=Object(P.a)("amount_callbacks"),H=Object(P.a)("keywordList"),z=a(130),J=a(131),$=a(132),I=a(70),K=a.n(I);function U(){return r.a.createElement(z.a,{position:"sticky"},r.a.createElement(J.a,null,r.a.createElement($.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(K.a,null)),r.a.createElement(x.a,{variant:"h6"},"USAC Budget/Spendings 2018-2019")))}var G=function(){var t=new M,e=new T(window.location.pathname+"/expense_summary.json",t);return r.a.createElement("div",null,r.a.createElement(U,null),r.a.createElement(v.a,{variant:"outlined",className:"App",style:{margin:"0 10%"}},r.a.createElement(D,{style:{margin:10},keywordList:t,dataLoader:e}),r.a.createElement(p,{style:{width:"100%",height:"80vh"},keywordList:t,dataLoader:e}),r.a.createElement(L,{style:{height:"80vh"},dataLoader:e})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[77,1,2]]]);
//# sourceMappingURL=main.5ec2d59e.chunk.js.map