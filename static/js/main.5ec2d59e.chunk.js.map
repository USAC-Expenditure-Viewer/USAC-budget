{"version":3,"sources":["util.js","Wordcloud.js","RecordTable.js","KeywordCrumb.js","KeywordList.js","Dataloader.js","TopBar.js","App.js","serviceWorker.js","index.js"],"names":["commaFormat","x","Number","isNaN","parts","parseFloat","toFixed","toString","split","replace","join","KMFormat","suffix","toPrecision","WordCloud","props","callbacks","getWordTooltip","word","text","value","onWordClick","getCallback","bind","onWordMouseOut","onWordMouseOver","options","fontFamily","fontSizes","fontStyle","fontWeight","scale","deterministic","rotations","rotationAngles","transitionDuration","state","words","this","dataLoader","addWordsCallback","setWords","style","callback","event","isActive","element","target","select","on","keywordList","addWord","transition","attr","setState","Component","records","order","orderBy","addRecordCallback","setRecords","property","isAsc","isDesc","Paper","TableContainer","height","Table","stickyHeader","size","aria-label","onRequestSort","handleRequestSort","TableBody","stableSort","map","row","index","TableRow","key","TableCell","Date","date","toDateString","department","description","amount","TableFooter","position","bottom","backgroundColor","borderTop","borderTopColor","align","reduce","prev","curr","comparator","a","b","array","getComparator","stabilizedThis","el","sort","headCells","id","label","RecordTableHead","TableHead","headCell","sortDirection","TableSortLabel","active","direction","onClick","createSortHandler","KeywordCrumb","addAmountCallback","changeList","numList","amounts","console","log","list","getList","Breadcrumbs","separator","Link","color","reset","slice","sliceWord","length","Typography","new_length","amount_list","concat","KeywordList","push","includes","forEach","c","indexOf","Dataloader","input_url","fetch","then","res","json","result","listChangeCallback","addChangeCallback","getRecords","totalAmount","getTotal","getWordList","root_word","filter","w","words_set","undefined","words_list","TopBar","AppBar","Toolbar","IconButton","edge","variant","App","loader","window","location","pathname","className","margin","width","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.5ec2d59e.chunk.js","sourcesContent":["export function commaFormat(x) {\n    if (Number.isNaN(x)) return \"\"\n    x = Number.parseFloat(x).toFixed(2).toString()\n    let parts = x.split(\".\")\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")\n    return parts.join(\".\");\n}\n\nexport function KMFormat(x) {\n    if (Number.isNaN(x)) return \"\"\n    x = Number.parseFloat(x).toPrecision(3)\n    let suffix = \"\";\n    if (x >= 1000000) {\n        suffix = \"M\"\n        x /= 1000000;\n    } else if (x >= 1000) {\n        suffix = \"K\"\n        x /= 1000;\n    }\n    return x.toString() + suffix;\n}\n","/**\n * Created by TylerLiu on 2018/12/23.\n */\nimport 'd3-transition';\nimport { select } from 'd3-selection';\nimport React, { Component } from 'react';\nimport ReactWordcloud from \"react-wordcloud\";\nimport {KMFormat} from \"./util\";\n\nexport default class WordCloud extends Component{\n\n    constructor(props) {\n        super(props)\n\n        this.callbacks = {\n            getWordTooltip: word =>`${word.text} has $${KMFormat(word.value)} in the category.`,\n            onWordClick: this.getCallback('onWordClick').bind(this),\n            onWordMouseOut: this.getCallback('onWordMouseOut').bind(this),\n            onWordMouseOver: this.getCallback('onWordMouseOver').bind(this),\n        };\n\n        this.options = {\n            fontFamily: 'impact',\n            fontSizes: [5, 60],\n            fontStyle: 'normal',\n            fontWeight: 'normal',\n            scale: 'log',\n            //spiral: 'archimedean',\n            deterministic: true,\n\n            rotations: 4,\n            rotationAngles: [-45, 90],\n\n            transitionDuration: 200,\n        }\n\n        this.state = {\n            words : [{text: 'Loading...', value: 100}]\n        }\n    }\n\n     componentDidMount() {\n         this.props.dataLoader.addWordsCallback(this.setWords.bind(this))\n     }\n\n    render() {\n        return(\n            <ReactWordcloud style={this.props.style} callbacks={this.callbacks} words={this.state.words} options={this.options}/>\n        )\n    }\n\n    getCallback(callback) {\n        return function(word, event) {\n            const isActive = callback !== 'onWordMouseOut';\n            const element = event.target;\n            const text = select(element);\n            text\n                .on('click', (() => {\n                    if (isActive) {\n                        this.props.keywordList.addWord(word.text);\n                    }\n                }))\n                .transition()\n                .attr('background', 'white')\n                .attr('text-decoration', isActive ? 'underline' : 'none');\n        };\n    }\n\n    setWords(words) {\n        this.setState({\n            words: words\n        })\n    }\n}","/**\n * Created by TylerLiu on 2018/12/23.\n */\nimport React, {Component} from 'react';\nimport {TableContainer, Paper, Table, TableHead, TableRow, TableCell, TableBody, TableFooter} from \"@material-ui/core\";\nimport TableSortLabel from \"@material-ui/core/TableSortLabel\";\nimport {commaFormat} from \"./util\";\n\nexport default class WordCloud extends Component{\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            records : [],\n            order : 'asc',\n            orderBy : null,\n        }\n    }\n\n     componentDidMount() {\n         this.props.dataLoader.addRecordCallback(this.setRecords.bind(this))\n     }\n\n    setRecords(records) {\n        this.setState({\n            records: records,\n            order: \"asc\",\n            orderBy: null\n        })\n     }\n\n    handleRequestSort(event, property) {\n        let isAsc = this.state.orderBy === property && this.state.order === \"asc\";\n        let isDesc = this.state.orderBy === property && this.state.order === \"desc\";\n        this.setState({\n            order: isAsc ? \"desc\" : \"asc\",\n            orderBy: isDesc ? null : property,\n        })\n    }\n\n    render() {\n        return(\n            <Paper style={this.props.style}>\n                <TableContainer style={{height: \"100%\"}}>\n                    <Table stickyHeader size=\"small\" aria-label=\"Transaction Records\">\n                        <RecordTableHead order={this.state.order} orderBy={this.state.orderBy}\n                                         onRequestSort={this.handleRequestSort.bind(this)}/>\n                        <TableBody>\n                            {this.stableSort(this.state.records).map((row, index) => (\n                                <TableRow key={index}>\n                                    <TableCell>{new Date(row.date * 1000).toDateString()}</TableCell>\n                                    <TableCell>{row.department}</TableCell>\n                                    <TableCell>{row.description}</TableCell>\n                                    <TableCell>{commaFormat(row.amount)}</TableCell>\n                                </TableRow>\n                            ))}\n                        </TableBody>\n                        <TableFooter style={{position: \"sticky\", bottom: 0, backgroundColor: \"#fafafa\", borderTop: 1, borderTopColor: \"#e0e0e0\"}}>\n                            <TableRow>\n                                <TableCell></TableCell>\n                                <TableCell></TableCell>\n                                <TableCell align=\"right\">Total: </TableCell>\n                                <TableCell>\n                                    {commaFormat(this.state.records.reduce((prev, curr) => prev + curr.amount, 0))}\n                                </TableCell>\n                            </TableRow>\n                        </TableFooter>\n                    </Table>\n                </TableContainer>\n            </Paper>\n        )\n    }\n\n    getComparator() {\n        let comparator = (a, b, orderBy) => (a[orderBy] < b[orderBy]) ? -1 : (a[orderBy] > b[orderBy] ? 1 : 0);\n        if (this.state.orderBy === null) return null;\n        return this.state.order === 'asc'\n            ? (a, b) => comparator(a, b, this.state.orderBy)\n            : (a, b) => -comparator(a, b, this.state.orderBy)\n    }\n\n    stableSort(array) {\n        const comparator = this.getComparator()\n        if (comparator === null) return array\n        const stabilizedThis = array.map((el, index) => [el, index])\n        stabilizedThis.sort((a, b) => {\n            const order = comparator(a[0], b[0])\n            if (order !== 0) return order\n            return a[1] - b[1]\n        });\n        return stabilizedThis.map((el) => el[0])\n    }\n}\n\nconst headCells = [\n    { id: 'date', label: 'Date' },\n    { id: 'department', label: 'Department' },\n    { id: 'description', label: 'Description' },\n    { id: 'amount', label: 'Amount' },\n];\n\nclass RecordTableHead extends Component {\n\n    createSortHandler(property) {\n        return (event) => this.props.onRequestSort(event, property);\n    }\n\n    render() {\n        return (\n            <TableHead>\n                <TableRow>\n                    {headCells.map((headCell) => (\n                        <TableCell\n                            key={headCell.id}\n                            sortDirection={this.props.orderBy === headCell.id ? this.props.order : false}\n                        >\n                            <TableSortLabel\n                                active={this.props.orderBy === headCell.id}\n                                direction={this.props.orderBy === headCell.id ? this.props.order : 'asc'}\n                                onClick={this.createSortHandler(headCell.id)}\n                            >\n                                {headCell.label}\n                            </TableSortLabel>\n                        </TableCell>\n                    ))}\n                </TableRow>\n            </TableHead>\n        );\n    }\n}","/**\n * Created by TylerLiu on 2018/12/23.\n */\nimport React, {Component} from 'react';\nimport {Breadcrumbs, Typography} from \"@material-ui/core\";\nimport Link from \"@material-ui/core/Link\";\nimport {KMFormat} from \"./util\";\n\nexport default class KeywordCrumb extends Component{\n\n    constructor(props) {\n        super(props)\n\n        this.props.dataLoader.addAmountCallback((amount)=>this.changeList(amount))\n\n        this.state = {\n            numList : 0,\n            amounts : []\n        }\n    }\n\n    componentDidMount() {\n\n    }\n\n    render() {\n        console.log(this.state.numList, this.state.amounts)\n        let list = this.props.keywordList.getList()\n        return(\n            <Breadcrumbs separator=\">\" style={this.props.style}>\n                <Link color=\"textPrimary\" onClick={()=>this.props.keywordList.reset()}>Transactions({this.state.amounts[0]})</Link>\n                {list.slice(0, -1).map((word, index)=>(\n                    <Link color=\"textSecondary\" onClick={()=>this.props.keywordList.sliceWord(word)}>{word}({this.state.amounts[index + 1]})</Link>\n                ))}\n                {list.length > 0 ? (<Typography color=\"textPrimary\">{list[list.length-1]}({this.state.amounts[list.length]})</Typography>) : null}\n            </Breadcrumbs>\n        )\n    }\n\n    changeList(amount){\n        const new_length = this.props.keywordList.getList().length\n        let amount_list = this.state.amounts\n        while (amount_list.length < new_length + 1) amount_list = amount_list.concat(\"\")\n        if (amount_list.length > new_length + 1) amount_list = amount_list.slice(0, new_length + 1)\n        amount_list[new_length] = KMFormat(amount)\n        this.setState({\n            numList: new_length,\n            amounts: amount_list\n        })\n    }\n}","\nexport default class KeywordList{\n\n    constructor(){\n        this.list = []\n        this.callback = []\n    }\n\n    addChangeCallback(callback) {\n        this.callback.push(callback)\n    }\n\n    addWord(word) {\n        if (!this.list.includes(word)) {\n            this.list.push(word)\n            this.callback.forEach(c => c(this.list))\n        }\n    }\n\n    sliceWord(word) {\n        let index = this.list.indexOf(word)\n        if (index !== -1) {\n            this.list = this.list.slice(0, index + 1)\n            this.callback.forEach(c => c(this.list))\n        }\n    }\n\n    reset() {\n        this.list = []\n        this.callback.forEach(c => c(this.list))\n    }\n\n    getList(){\n        return this.list\n    }\n}","\nexport default class Dataloader{\n\n    #data = null\n    #records_callbacks = []\n    #words_callbacks = []\n    #amount_callbacks = []\n    #keywordList\n\n    constructor(input_url, keywordList) {\n        fetch(input_url)\n            .then(res => res.json())\n            .then(result =>{\n                this.#data = result\n                this.listChangeCallback()\n            })\n        this.#keywordList = keywordList\n        keywordList.addChangeCallback(() => this.listChangeCallback())\n    }\n\n    listChangeCallback() {\n        let records = this.getRecords(this.#keywordList.getList())\n        this.#records_callbacks.forEach(c=>c(records))\n        let totalAmount = this.getTotal(records)\n        this.#amount_callbacks.forEach(c=>c(totalAmount))\n        let words = this.getWordList(records)\n        this.#words_callbacks.forEach(c=>c(words))\n    }\n\n    addRecordCallback(callback) {\n        this.#records_callbacks.push(callback)\n    }\n\n    addWordsCallback(callback) {\n        this.#words_callbacks.push(callback)\n    }\n\n    addAmountCallback(callback) {\n        this.#amount_callbacks.push(callback)\n    }\n\n    getRecords(root_word) {\n        if (this.#data === null) {\n            return [{\"date\": \"\",\n                \"department\": \"\",\n                \"description\": \"Loading...\",\n                \"amount\": \"\",}];\n        }\n\n        if (root_word === null || root_word === [])\n            return this.#data\n\n        let records = this.#data.filter(row => {\n            return root_word.map((w) => row.words.includes(w)).reduce((a, b)=>a && b, true)\n        })\n        //records.sort((a, b) => b.amount - a.amount)\n        return records\n    }\n\n    getWordList(records) {\n        if (this.#data === null) {\n            return [{text: 'Loading...', value: 100}];\n        }\n\n        let words_set = {}\n        records.forEach(row => {\n            row.words.forEach(w => {\n                if (words_set[w] === undefined) words_set[w] = row.amount;\n                else words_set[w] += row.amount;\n            })\n        })\n\n        let words_list = []\n        for (let w in words_set) {\n            words_list.push({text: w, value: words_set[w]})\n        }\n\n        words_list.sort((a, b) => a.value - b.value)\n\n        return words_list\n    }\n\n    getTotal(records){\n        return records.reduce((prev, curr) => prev + curr.amount, 0)\n    }\n}","import {AppBar, IconButton, Toolbar, Typography} from \"@material-ui/core\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport React from \"react\";\n\nexport default function TopBar() {\n    return (\n        <AppBar position=\"sticky\">\n            <Toolbar>\n                <IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\">\n                    <MenuIcon/>\n                </IconButton>\n                <Typography variant=\"h6\">\n                    USAC Budget/Spendings 2018-2019\n                </Typography>\n            </Toolbar>\n        </AppBar>\n    )\n}","import React from 'react';\nimport './App.css';\nimport WordCloud from \"./Wordcloud\";\nimport RecordTable from \"./RecordTable\";\nimport KeywordCrumb from \"./KeywordCrumb\";\nimport Paper from \"@material-ui/core/Paper\";\nimport KeywordList from \"./KeywordList\";\nimport Dataloader from \"./Dataloader\";\nimport TopBar from \"./TopBar\";\n\nfunction App() {\n    let list = new KeywordList()\n    let loader = new Dataloader(window.location.pathname + \"/expense_summary.json\", list)\n    return (\n        <div>\n            <TopBar/>\n            <Paper variant=\"outlined\" className=\"App\" style={{margin: '0 10%'}}>\n                <KeywordCrumb style={{margin: 10}} keywordList={list} dataLoader={loader}/>\n                <WordCloud style={{width: '100%', height: '80vh'}} keywordList={list} dataLoader={loader}/>\n                <RecordTable style={{height: '80vh'}} dataLoader={loader}/>\n            </Paper>\n        </div>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}