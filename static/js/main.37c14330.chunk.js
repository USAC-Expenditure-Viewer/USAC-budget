(this.webpackJsonpbudget_wc=this.webpackJsonpbudget_wc||[]).push([[0],{406:function(t,e,a){},558:function(t,e,a){t.exports=a(837)},563:function(t,e,a){},577:function(t,e){},837:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(18),o=a.n(i),l=(a(563),a(406),a(862)),s=a(407),u=a(333),c=a(105),d=a(503),h=a.n(d);function f(){return r.a.createElement(l.a,{position:"sticky"},r.a.createElement(s.a,null,r.a.createElement(u.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(h.a,null)),r.a.createElement(c.a,{variant:"h6"},"USAC Budget/Spendings 2018-2019")))}var m=a(55),g=a(56),p=a(70),v=a(69),y=a(167),b=(a(496),a(864)),k=a(531);function C(t){if(Number.isNaN(t))return"";var e=t.toFixed(2).split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function E(t){if(Number.isNaN(t))return"";var e="";return Math.abs(t)>=1e9?(e="B",t/=1e9):Math.abs(t)>=1e6?(e="M",t/=1e6):Math.abs(t)>=1e3&&(e="K",t/=1e3),t.toPrecision(3)+e}function w(t){var e=1;return t.includes("K")&&(e=1e3,t=t.replace("K","")),t.includes("M")&&(e=1e6,t=t.replace("M","")),t.includes("B")&&(t=t.replace("B",""),e=1e9),Number.parseFloat(t)*e}var O=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(t){var n;return Object(m.a)(this,a),(n=e.call(this,t)).callbacks={getWordTooltip:function(t){return"".concat(t.text," has $").concat(E(t.value)," in the category.")},onWordClick:n.getCallback("onWordClick").bind(Object(y.a)(n)),onWordMouseOut:n.getCallback("onWordMouseOut").bind(Object(y.a)(n)),onWordMouseOver:n.getCallback("onWordMouseOver").bind(Object(y.a)(n))},n.options={fontFamily:"impact",fontSizes:[5,60],fontStyle:"normal",fontWeight:"normal",scale:"log",deterministic:!0,rotations:4,rotationAngles:[-45,90],transitionDuration:200},n.state={words:[{text:"Loading...",value:100}]},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.dataloader.addChangeCallback(this.setWords.bind(this))}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:"80vh"},hidden:this.props.hidden},r.a.createElement(k.a,{callbacks:this.callbacks,words:this.props.dataloader.getWordList(),options:this.options}))}},{key:"getCallback",value:function(t){var e=this;return function(a,n){var r="onWordMouseOut"!==t;Object(b.a)(n.target).on("click",(function(){r&&e.props.dataloader.addKeywordFilter(a.text)})).transition().attr("background","white").attr("text-decoration",r?"underline":"none")}}},{key:"setWords",value:function(){this.forceUpdate()}}]),a}(n.Component),j=a(511),x=a.n(j),M=a(877),F=a(878),D=a(879),S=a(880),W=a(881),A=a(882),N=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){var t;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).columns=[{title:"Date",field:"date",type:"date"},{title:"Amount",field:"amount",type:"currency"},{title:"Description",field:"description"},{title:"Department",field:"department"},{title:"Fund",field:"fund"},{title:"Division",field:"division"},{title:"Event",field:"event"},{title:"GL",field:"gl"}],t.options={showTitle:!0,sorting:!0,exportButton:!0,padding:"dense",paging:!0,search:!1,draggable:!1,headerStyle:{position:"sticky",top:0},exportAllData:!0},t.icons={Export:M.a,SortArrow:F.a,FirstPage:D.a,LastPage:S.a,NextPage:W.a,PreviousPage:A.a},t}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.props.dataloader.addChangeCallback((function(){t.forceUpdate()}))}},{key:"render",value:function(){return r.a.createElement(x.a,{options:this.options,columns:this.columns,icons:this.icons,data:this.props.dataloader.getRecords(),title:"Transactions: total $"+C(this.props.dataloader.getTotal())})}}]),a}(n.Component),L=a(886),P=a(876),_=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){return Object(m.a)(this,a),e.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.props.dataloader.addChangeCallback((function(){return t.forceUpdate()}))}},{key:"render",value:function(){var t=this,e=this.props.dataloader.getFilters();return r.a.createElement(L.a,{separator:">",style:this.props.style},r.a.createElement(P.a,{key:-1,color:"textPrimary",onClick:function(){return t.props.dataloader.sliceFilter(0)}},"Transactions($",E(this.props.dataloader.getDatasetTotal()),")"),e.slice(0,-1).map((function(e,a){return r.a.createElement(P.a,{key:a,color:"textSecondary",onClick:function(){return t.props.dataloader.sliceFilter(a+1)}},e.category,": ",e.name,"($",E(e.amount),")")})),e.length>0?r.a.createElement(c.a,{color:"textPrimary",key:e.length},e[e.length-1].category,": ",e[e.length-1].name,"($",E(e[e.length-1].amount),")"):null)}}]),a}(n.Component),K=a(187),B=a(106),R=a(80),$=a(518),T=function(){function t(e){var a=this;Object(m.a)(this,t),this.data=[],this.filters=[],this.dataChangeCallbacks=[],this.dataset=void 0,this.total_amount=0,this.dataset=t.parseDataset(e),$.parse(window.location.pathname+"/expense_summary_"+this.dataset+".csv",{download:!0,header:!0,complete:function(t){a.data=t.data.map((function(t){return t.date=new Date(1e3*Number.parseFloat(t.date)),t.amount=Number.parseFloat(t.amount),t.words=t.__parsed_extra||[],t})),a.onLoad(e)}})}return Object(g.a)(t,[{key:"onLoad",value:function(t){this.total_amount=this.data.reduce((function(t,e){return t+e.amount}),0),this.parseQuery(t),this.listChangeCallback()}},{key:"parseQuery",value:function(t){var e=this;"?"===t[0]&&(t=t.slice(1));var a=this.dataChangeCallbacks;this.dataChangeCallbacks=[];try{t.split("&").forEach((function(t){if(t.includes("=")){var a=t.indexOf("="),n=t.substr(0,a),r=t.substr(a+1);switch(n){case"keyword":e.addKeywordFilter(r);break;case"fund":case"division":case"department":case"gl":case"event":e.addCategoryFilter(n,atob(r));break;case"amount":if(!r.includes(".."))return;var i=r.split("..").map((function(t){return w(t)}));e.addAmountFilter(i[0],i[1])}}}))}catch(n){console.log(n)}this.dataChangeCallbacks=a}},{key:"setQueryString",value:function(){var t="d="+this.dataset+this.filters.reduce((function(t,e){switch(e.category){case"keyword":return t+"&keyword="+e.name;case"amount":return t+"&amount="+e.name.replace("~","..");default:return t+"&"+e.category+"="+btoa(e.name)}}),""),e=window.location.href;e.includes("?")&&(e=e.substr(0,e.indexOf("?"))),window.history.pushState({path:e+"?"+t},"",e+"?"+t)}},{key:"listChangeCallback",value:function(){this.dataChangeCallbacks.forEach((function(t){return t()})),this.setQueryString()}},{key:"addChangeCallback",value:function(t){this.dataChangeCallbacks.push(t)}},{key:"getRecords",value:function(){return 0===this.data.length?[]:0===this.filters.length?this.data:this.filters[this.filters.length-1].index}},{key:"getWordList",value:function(){if(0===this.data.length)return[];var t=new Map;this.getRecords().forEach((function(e){e.words.forEach((function(a){t.set(a,(t.get(a)||0)+e.amount)}))}));var e,a=[],n=Object(R.a)(t.entries());try{for(n.s();!(e=n.n()).done;){var r=Object(B.a)(e.value,2),i=r[0],o=r[1];a.push({text:i,value:o})}}catch(l){n.e(l)}finally{n.f()}return a.sort((function(t,e){return t.value-e.value})),a}},{key:"getCategories",value:function(t){if(0===this.data.length)return[];var e=new Map;this.getRecords().forEach((function(a){var n=a[t];e.set(n,(e.get(n)||0)+a.amount)}));var a,n=[],r=Object(R.a)(e.entries());try{for(r.s();!(a=r.n()).done;){var i=Object(B.a)(a.value,2),o=i[0],l=i[1];n.push({text:o,value:l})}}catch(s){r.e(s)}finally{r.f()}return n.sort((function(t,e){return t.value-e.value})),n}},{key:"getAmountBins",value:function(t){if(0===this.data.length)return{data:[],domain:[0,1]};var e,a=null;0!=this.filters.length&&"amount"==this.filters[this.filters.length-1].category?(e=this.filters.length>=2?this.filters[this.filters.length-2].index:this.data,a=this.filters[this.filters.length-1].name.split("~").map((function(t){return w(t)}))):e=this.getRecords();var n=e.reduce((function(t,e){return[Math.min(t[0],e.amount),Math.max(t[1],e.amount)]}),[Number.MAX_VALUE,Number.MIN_VALUE]),r=Object(B.a)(n,2),i=r[0],o=r[1];null==a&&(a=[i,o]);for(var l=[],s=(o-i)/t,u=0;u<t;u++)l.push({low:i+u*s,high:i+(u+1)*s,value:0,name:E(i+(u+.5)*s)});return e.forEach((function(t){l.forEach((function(e){e.low<=t.amount&&t.amount<e.high&&(e.value+=t.amount)}))})),{data:l,domain:a}}},{key:"getTotal",value:function(){return 0===this.filters.length?this.total_amount:this.filters[this.filters.length-1].amount}},{key:"getDatasetTotal",value:function(){return this.total_amount}},{key:"getFilters",value:function(){return this.filters}},{key:"getDatasetName",value:function(){return this.dataset}},{key:"sliceFilter",value:function(t){this.filters=this.filters.slice(0,t),this.listChangeCallback()}},{key:"addKeywordFilter",value:function(t){if(0!==this.data.length&&!this.filters.reduce((function(e,a){return e||"keyword"===a.category&&a.name===t}),!1)){var e;if(0!==this.filters.length)e=this.filters[this.filters.length-1].index.filter((function(e){return e.words.includes(t)}));else e=this.data.filter((function(e){return e.words.includes(t)}));this.filters.push({category:"keyword",name:t,index:e,amount:e.reduce((function(t,e){return t+e.amount}),0)}),this.listChangeCallback()}}},{key:"addCategoryFilter",value:function(t,e){if(0!==this.data.length&&!this.filters.reduce((function(a,n){return a||n.category===t&&n.name===e}),!1)){var a;if(0!==this.filters.length)a=this.filters[this.filters.length-1].index.filter((function(a){return a[t]===e}));else a=this.data.filter((function(a){return a[t]===e}));this.filters.push({category:t,name:e,index:a,amount:a.reduce((function(t,e){return t+e.amount}),0)}),this.listChangeCallback()}}},{key:"addAmountFilter",value:function(t,e){if(0!==this.data.length){this.filters.length>0&&"amount"===this.filters[this.filters.length-1].category&&(this.filters=this.filters.slice(0,-1));var a=(this.filters.length>0?this.filters[this.filters.length-1].index:this.data).filter((function(a){return t<=a.amount&&a.amount<=e}));this.filters.push({category:"amount",name:E(t)+"~"+E(e),index:a,amount:a.reduce((function(t,e){return t+e.amount}),0)}),this.listChangeCallback()}}}],[{key:"parseDataset",value:function(t){"?"===t[0]&&(t=t.slice(1));var e=t.split("&").filter((function(t){return t.startsWith("d=")}));return 0===e.length?"2018":e[0].substr(2)}}]),t}(),U=a(57),Q=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(){return Object(m.a)(this,a),e.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.props.dataloader.addChangeCallback((function(){return t.forceUpdate()}))}},{key:"render",value:function(){var t=this,e=this.props.dataloader.getCategories(this.props.category);return r.a.createElement("div",{style:{height:"80vh"},hidden:this.props.hidden||!1},r.a.createElement(U.h,{height:"100%",width:"100%"},r.a.createElement(U.f,null,r.a.createElement(U.e,{data:e,dataKey:"value",nameKey:"text",fill:this.getColor(),label:function(t){var e=t.percent,a=t.name;return(e||0)>.005?a:""},labelLine:!1,onClick:function(e){return t.props.dataloader.addCategoryFilter(t.props.category,e.text)}}),r.a.createElement(U.i,{formatter:function(t){return"$"+E(t)},contentStyle:{padding:"0 5px",margin:0,borderRadius:5}}))))}},{key:"getColor",value:function(){switch(this.props.category){case"fund":return"#ef5350";case"division":return"#ab47bc";case"department":return"#26c6da";case"gl":return"#26a69a";case"event":return"#d4e157"}}}]),a}(n.Component),q=a(884),G=a(872),I=a(887),J=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(t){var n;return Object(m.a)(this,a),(n=e.call(this,t)).state={value:[0,100],data:[]},n}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.props.dataloader.addChangeCallback((function(){return t.updateState()})),this.updateState()}},{key:"updateState",value:function(){var t=this.props.dataloader.getAmountBins(20),e=t.data,a=t.domain;this.setState({data:e,value:a})}},{key:"render",value:function(){var t=this,e=this.state.data,a=0==e.length?[0,1]:[e[0].low,e[e.length-1].high];return r.a.createElement("div",{style:{height:"80vh",width:"80%",margin:"auto"},hidden:this.props.hidden||!1},r.a.createElement(U.h,{height:"90%",width:"100%"},r.a.createElement(U.b,{data:e},r.a.createElement(U.c,{strokeDasharray:"3 3"}),r.a.createElement(U.j,{dataKey:"name",domain:a,tick:!1,axisLine:!1}),r.a.createElement(U.k,{domain:[0,"datamax"],tickFormatter:function(t){return"$"+E(t)}}),r.a.createElement(U.g,{y:0,label:"",stroke:"black"}),r.a.createElement(U.a,{dataKey:"value",fill:this.getColor()},e.map((function(e,a){return r.a.createElement(U.d,{key:"cell-".concat(a),fill:t.getColor(),opacity:t.getOpacity(e.low,e.high)})}))))),r.a.createElement(I.a,{value:this.state.value,min:a[0],max:a[1],onChange:this.onRangeChange.bind(this),onChangeCommitted:this.onRangeChangeCommitted.bind(this),valueLabelDisplay:"auto",valueLabelFormat:function(t){return"$"+E(t)},marks:this.getMarks(a)}))}},{key:"onRangeChange",value:function(t,e){this.setState({value:e})}},{key:"onRangeChangeCommitted",value:function(t,e){var a=e;this.props.dataloader.addAmountFilter(a[0],a[1])}},{key:"getColor",value:function(){return"#29b6f6"}},{key:"getOpacity",value:function(t,e){return.3+.7*(Math.max(0,Math.min(this.state.value[1],e)-Math.max(this.state.value[0],t))/(e-t))}},{key:"getMarkPoint",value:function(t){return{value:t,label:"$"+E(t)}}},{key:"getMarks",value:function(t){var e=this,a=t.map((function(t){return e.getMarkPoint(t)}));t[0]<0&&t[1]>0&&a.push(this.getMarkPoint(0));for(var n=(t[1]-t[0])/10,r=1;r<10;r++){var i=Number.parseFloat((t[0]+r*n).toPrecision(2));Math.abs(i)<.5*n||a.push(this.getMarkPoint(i))}return a}}]),a}(n.Component),V=function(t){Object(p.a)(a,t);var e=Object(v.a)(a);function a(t){var n;return Object(m.a)(this,a),(n=e.call(this,t)).loader=void 0,n.state={value:0},n.loader=new T(n.props.query),n}return Object(g.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement(K.a,{variant:"outlined",style:{margin:"0 10%"}},r.a.createElement(_,{style:{margin:10},dataloader:this.loader}),r.a.createElement(q.a,{value:this.state.value,onChange:function(e,a){t.setState({value:a})},indicatorColor:"primary",textColor:"primary",centered:!0},r.a.createElement(G.a,{label:"Keywords"}),r.a.createElement(G.a,{label:"Fund"}),r.a.createElement(G.a,{label:"Division"}),r.a.createElement(G.a,{label:"Department"}),r.a.createElement(G.a,{label:"GL"}),r.a.createElement(G.a,{label:"Event"}),r.a.createElement(G.a,{label:"Amount"})),r.a.createElement(O,{hidden:0!==this.state.value,dataloader:this.loader}),r.a.createElement(Q,{hidden:1!==this.state.value,category:"fund",dataloader:this.loader}),r.a.createElement(Q,{hidden:2!==this.state.value,category:"division",dataloader:this.loader}),r.a.createElement(Q,{hidden:3!==this.state.value,category:"department",dataloader:this.loader}),r.a.createElement(Q,{hidden:4!==this.state.value,category:"gl",dataloader:this.loader}),r.a.createElement(Q,{hidden:5!==this.state.value,category:"event",dataloader:this.loader}),r.a.createElement(J,{hidden:6!==this.state.value,dataloader:this.loader}),r.a.createElement(N,{dataloader:this.loader}))}}]),a}(r.a.Component);var z=function(){return r.a.createElement("div",null,r.a.createElement(f,null),r.a.createElement(V,{query:window.location.search}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[558,1,2]]]);
//# sourceMappingURL=main.37c14330.chunk.js.map